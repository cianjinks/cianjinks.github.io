<!DOCTYPE html><html lang="en" data-mode="dark" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.2.1" /><meta property="og:title" content="OpenGL Tutorial - Batch Rendering and Dynamic VBOs" /><meta property="og:locale" content="en" /><meta name="description" content="Hello and welcome to my second ever tutorial on computer graphics programming using OpenGL. My previous tutorials covered many of the basics of OpenGL such as VBOs, IBOs, Shaders and MVP Matrices by implementing them in a Mandelbrot Set Fractal application. In that tutorial series we only ended up drawing a single quad to the screen which we then applied our Mandelbrot Fragment Shader to. If you remember, when supplying our data to our VBO using glBufferData, we specified for it to use GL_STATIC_DRAW. This meant that whatever data we placed there would not be changed again in the future. This data being the vertex attributes of our vertices, which in our case was their position." /><meta property="og:description" content="Hello and welcome to my second ever tutorial on computer graphics programming using OpenGL. My previous tutorials covered many of the basics of OpenGL such as VBOs, IBOs, Shaders and MVP Matrices by implementing them in a Mandelbrot Set Fractal application. In that tutorial series we only ended up drawing a single quad to the screen which we then applied our Mandelbrot Fragment Shader to. If you remember, when supplying our data to our VBO using glBufferData, we specified for it to use GL_STATIC_DRAW. This meant that whatever data we placed there would not be changed again in the future. This data being the vertex attributes of our vertices, which in our case was their position." /><link rel="canonical" href="https://cianjinks.github.io//posts/opengl-tutorial-batch-rendering-and-dynamic-vbos/" /><meta property="og:url" content="https://cianjinks.github.io//posts/opengl-tutorial-batch-rendering-and-dynamic-vbos/" /><meta property="og:site_name" content="Cian Jinks" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2020-06-12T13:00:00+01:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="OpenGL Tutorial - Batch Rendering and Dynamic VBOs" /><meta name="twitter:site" content="@cianjinks" /><meta name="google-site-verification" content="google467373ea47fceddf" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2022-06-17T21:07:53+01:00","datePublished":"2020-06-12T13:00:00+01:00","description":"Hello and welcome to my second ever tutorial on computer graphics programming using OpenGL. My previous tutorials covered many of the basics of OpenGL such as VBOs, IBOs, Shaders and MVP Matrices by implementing them in a Mandelbrot Set Fractal application. In that tutorial series we only ended up drawing a single quad to the screen which we then applied our Mandelbrot Fragment Shader to. If you remember, when supplying our data to our VBO using glBufferData, we specified for it to use GL_STATIC_DRAW. This meant that whatever data we placed there would not be changed again in the future. This data being the vertex attributes of our vertices, which in our case was their position.","headline":"OpenGL Tutorial - Batch Rendering and Dynamic VBOs","mainEntityOfPage":{"@type":"WebPage","@id":"https://cianjinks.github.io//posts/opengl-tutorial-batch-rendering-and-dynamic-vbos/"},"url":"https://cianjinks.github.io//posts/opengl-tutorial-batch-rendering-and-dynamic-vbos/"}</script><title>OpenGL Tutorial - Batch Rendering and Dynamic VBOs | Cian Jinks</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Cian Jinks"><meta name="application-name" content="Cian Jinks"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script><body data-spy="scroll" data-target="#toc" data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src=" /assets/img/avatar/hobbes_3.jpg " alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">Cian Jinks</a></div><div class="site-subtitle font-italic"></div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <a href="https://github.com/cianjinks" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href="https://twitter.com/cianjinks" aria-label="twitter" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['cjinks99','gmail.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper" class="row justify-content-center"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>OpenGL Tutorial - Batch Rendering and Dynamic VBOs</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>OpenGL Tutorial - Batch Rendering and Dynamic VBOs</h1><div class="post-meta text-muted"><div> By <em> <a href="https://twitter.com/cianjinks">Cian Jinks</a> </em></div><div class="d-flex"><div> <span> Posted <em class="timeago" data-ts="1591963200" data-toggle="tooltip" data-placement="bottom" data-tooltip-df="llll" > 2020-06-12 </em> </span> <span> Updated <em class="timeago" data-ts="1655496473" data-toggle="tooltip" data-placement="bottom" data-tooltip-df="llll" > 2022-06-17 </em> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="5872 words"> <em>32 min</em> read</span></div></div></div><div class="post-content"><p>Hello and welcome to my second ever tutorial on computer graphics programming using OpenGL. My <a href="https://cianjinks.github.io/posts/opengl-tutorial-visualizing-the-mandelbrot-set-fractal-part-1-of-2/">previous tutorials</a> covered many of the basics of OpenGL such as VBOs, IBOs, Shaders and MVP Matrices by implementing them in a Mandelbrot Set Fractal application. In that tutorial series we only ended up drawing a single quad to the screen which we then applied our Mandelbrot Fragment Shader to. If you remember, when supplying our data to our VBO using <code class="language-plaintext highlighter-rouge">glBufferData</code>, we specified for it to use <code class="language-plaintext highlighter-rouge">GL_STATIC_DRAW</code>. This meant that whatever data we placed there would not be changed again in the future. This data being the vertex attributes of our vertices, which in our case was their position.</p><p>As a result, we are unable to modify the position of our quad’s vertices on the fly. So to get around this when we wanted to “move” our quad, we instead moved the “camera” which we created. Meaning the original vertex positions of our quad never changed. This works great when all we have is one quad however what if you wanted to have multiple quads in the same Vertex Buffer and move them all in different directions independent of each other? That’s where dynamic vertex buffers and batch rendering comes into play.</p><h2 id="draw-calls"><span class="mr-2">Draw Calls</span><a href="#draw-calls" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><p>Before we begin talking about Batch Rendering and making our Vertex Buffers dynamic we need to grasp the idea of a draw call. Once all of our various vertex attributes and indices are placed into their respective buffers on the GPU we then use the following function in our main loop to draw everything to the screen:</p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="no">GL30</span><span class="o">.</span><span class="na">glDrawElements</span><span class="o">(</span><span class="no">GL30</span><span class="o">.</span><span class="na">GL_TRIANGLES</span><span class="o">,</span> <span class="n">indices</span><span class="o">.</span><span class="na">length</span><span class="o">,</span> <span class="no">GL_UNSIGNED_INT</span><span class="o">,</span> <span class="mi">0</span><span class="o">);</span>
</pre></table></code></div></div><p>(If you don’t understand the specific parameters of this function check out the <a href="https://cianjinks.github.io/posts/opengl-tutorial-visualizing-the-mandelbrot-set-fractal-part-1-of-2/">mandelbrot tutorial part 1</a> or read about it on <a href="http://docs.gl/">docs.gl</a>)</p><p>This function is called a “Draw Call” as we are telling the GPU to use the data we have given it to draw stuff to the screen. One way in which we could draw two quads with different positions would be to use multiple draw calls, moving our “camera” using an MVP Matrix in between like so (this code is incomplete but represents the idea):</p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre><td class="rouge-code"><pre><span class="n">mvpmatrix</span><span class="o">.</span><span class="na">translate</span><span class="o">(</span><span class="mf">0.5</span><span class="o">,</span> <span class="mi">0</span><span class="o">);</span>
<span class="kt">int</span> <span class="n">mat4location</span> <span class="o">=</span> <span class="no">GL30</span><span class="o">.</span><span class="na">glGetUniformLocation</span><span class="o">(</span><span class="n">programID</span><span class="o">,</span> <span class="s">"u_MVP"</span><span class="o">);</span>
<span class="no">GL30</span><span class="o">.</span><span class="na">glUniformMatrix4fv</span><span class="o">(</span><span class="n">mat4location</span><span class="o">,</span> <span class="kc">false</span><span class="o">,</span> <span class="n">mvpmatrix</span><span class="o">);</span>

<span class="no">GL30</span><span class="o">.</span><span class="na">glDrawElements</span><span class="o">(</span><span class="no">GL30</span><span class="o">.</span><span class="na">GL_TRIANGLES</span><span class="o">,</span> <span class="n">indices</span><span class="o">.</span><span class="na">length</span><span class="o">,</span> <span class="no">GL_UNSIGNED_INT</span><span class="o">,</span> <span class="mi">0</span><span class="o">);</span>

<span class="n">mvpmatrix</span><span class="o">.</span><span class="na">translate</span><span class="o">(-</span><span class="mf">0.5</span><span class="o">,</span> <span class="mi">0</span><span class="o">);</span>
<span class="kt">int</span> <span class="n">mat4location</span> <span class="o">=</span> <span class="no">GL30</span><span class="o">.</span><span class="na">glGetUniformLocation</span><span class="o">(</span><span class="n">programID</span><span class="o">,</span> <span class="s">"u_MVP"</span><span class="o">);</span>
<span class="no">GL30</span><span class="o">.</span><span class="na">glUniformMatrix4fv</span><span class="o">(</span><span class="n">mat4location</span><span class="o">,</span> <span class="kc">false</span><span class="o">,</span> <span class="n">mvpmatrix</span><span class="o">);</span>

<span class="no">GL30</span><span class="o">.</span><span class="na">glDrawElements</span><span class="o">(</span><span class="no">GL30</span><span class="o">.</span><span class="na">GL_TRIANGLES</span><span class="o">,</span> <span class="n">indices</span><span class="o">.</span><span class="na">length</span><span class="o">,</span> <span class="no">GL_UNSIGNED_INT</span><span class="o">,</span> <span class="mi">0</span><span class="o">);</span>
</pre></table></code></div></div><p>This would in fact work. When we run such a program we should see two quads on our screen with different positions. What we are in fact actually doing is drawing the same quad twice, at two different camera positions. This works fine and all but I’m sure you can already think of some of the major limitations of this approach. For example we would never be able to color the two quads differently as they both are using the same shaders. Not only that, but using multiple Draw Calls is quite intensive on the GPU when you start to draw much more things. Therefore, it is best practicec to batch as much as possible together into a single draw call.</p><h2 id="batch-rendering"><span class="mr-2">Batch Rendering</span><a href="#batch-rendering" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><p>To demonstrate how to implement batch rendering we are going to start a new project in which we render four quads together in one draw call with different positions each and also different colors. Just like in the Mandelbrot Tutorials I am going to be using <a href="https://www.lwjgl.org/">LWJGL</a> for my OpenGL bindings and therefore programming in Java. If you wish to follow along directly with this tutorial I wrote another on how to setup a project exactly like mine <a href="https://cianjinks.github.io/posts/tutorial-using-maven-and-intellij-for-opengl-projects/">here</a>. To get started I will create a file called <code class="language-plaintext highlighter-rouge">Application.java</code> and paste in the starter code from LWJGL’s <a href="https://www.lwjgl.org/guide">starter page</a>. If you’re wondering what this code does I once again already discussed it in part one of the Mandelbrot Tutorial Series.</p><p>(Before writing any new OpenGL code I will simply set a few variables such as the window resolution to 480x480 as well as title to “Batch Rendering Tutorial”)</p><p>To start we are going to define the positions of the vertices of our four quads in a simple float array:</p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
</pre><td class="rouge-code"><pre><span class="kt">float</span><span class="o">[]</span> <span class="n">vertices</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">float</span><span class="o">[]</span> <span class="o">{</span>
  <span class="c1">// Quad 1 - Top Left</span>
  <span class="o">-</span><span class="mf">0.75f</span><span class="o">,</span>  <span class="mf">0.75f</span><span class="o">,</span>
  <span class="o">-</span><span class="mf">0.75f</span><span class="o">,</span>  <span class="mf">0.25f</span><span class="o">,</span>
  <span class="o">-</span><span class="mf">0.25f</span><span class="o">,</span>  <span class="mf">0.25f</span><span class="o">,</span>
  <span class="o">-</span><span class="mf">0.25f</span><span class="o">,</span>  <span class="mf">0.75f</span><span class="o">,</span>

  <span class="c1">// Quad 2 - Bottom Left</span>
  <span class="o">-</span><span class="mf">0.75f</span><span class="o">,</span> <span class="o">-</span><span class="mf">0.25f</span><span class="o">,</span>
  <span class="o">-</span><span class="mf">0.75f</span><span class="o">,</span> <span class="o">-</span><span class="mf">0.75f</span><span class="o">,</span>
  <span class="o">-</span><span class="mf">0.25f</span><span class="o">,</span> <span class="o">-</span><span class="mf">0.75f</span><span class="o">,</span>
  <span class="o">-</span><span class="mf">0.25f</span><span class="o">,</span> <span class="o">-</span><span class="mf">0.25f</span><span class="o">,</span>

  <span class="c1">// Quad 3 - Bottom Right</span>
  <span class="mf">0.25f</span><span class="o">,</span> <span class="o">-</span><span class="mf">0.25f</span><span class="o">,</span>
  <span class="mf">0.25f</span><span class="o">,</span> <span class="o">-</span><span class="mf">0.75f</span><span class="o">,</span>
  <span class="mf">0.75f</span><span class="o">,</span> <span class="o">-</span><span class="mf">0.75f</span><span class="o">,</span>
  <span class="mf">0.75f</span><span class="o">,</span> <span class="o">-</span><span class="mf">0.25f</span><span class="o">,</span>

  <span class="c1">// Quad 4 - Top Right</span>
  <span class="mf">0.25f</span><span class="o">,</span> <span class="mf">0.75f</span><span class="o">,</span>
  <span class="mf">0.25f</span><span class="o">,</span> <span class="mf">0.25f</span><span class="o">,</span>
  <span class="mf">0.75f</span><span class="o">,</span> <span class="mf">0.25f</span><span class="o">,</span>
  <span class="mf">0.75f</span><span class="o">,</span> <span class="mf">0.75f</span>
<span class="o">};</span>
</pre></table></code></div></div><p>We then need to setup a VBO just like normal:</p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
</pre><td class="rouge-code"><pre><span class="c1">// VBO (Vertex Buffer Object)</span>
<span class="nc">FloatBuffer</span> <span class="n">vboBuffer</span> <span class="o">=</span> <span class="nc">BufferUtils</span><span class="o">.</span><span class="na">createFloatBuffer</span><span class="o">(</span><span class="n">vertices</span><span class="o">.</span><span class="na">length</span><span class="o">);</span>
<span class="k">for</span><span class="o">(</span><span class="kt">float</span> <span class="n">vertex</span> <span class="o">:</span> <span class="n">vertices</span><span class="o">)</span> <span class="o">{</span>
  <span class="n">vboBuffer</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">vertex</span><span class="o">);</span>
<span class="o">}</span>
<span class="n">vboBuffer</span><span class="o">.</span><span class="na">flip</span><span class="o">();</span>

<span class="c1">// Pass data to GPU</span>
<span class="kt">int</span> <span class="n">positionElementCount</span> <span class="o">=</span> <span class="n">vertices</span><span class="o">.</span><span class="na">length</span> <span class="o">/</span> <span class="mi">16</span><span class="o">;</span>
<span class="kt">int</span> <span class="n">vboID</span> <span class="o">=</span> <span class="no">GL30</span><span class="o">.</span><span class="na">glGenBuffers</span><span class="o">();</span>
<span class="no">GL30</span><span class="o">.</span><span class="na">glBindBuffer</span><span class="o">(</span><span class="no">GL30</span><span class="o">.</span><span class="na">GL_ARRAY_BUFFER</span><span class="o">,</span> <span class="n">vboID</span><span class="o">);</span>
<span class="no">GL30</span><span class="o">.</span><span class="na">glBufferData</span><span class="o">(</span><span class="no">GL30</span><span class="o">.</span><span class="na">GL_ARRAY_BUFFER</span><span class="o">,</span> <span class="n">vboBuffer</span><span class="o">,</span> <span class="no">GL30</span><span class="o">.</span><span class="na">GL_STATIC_DRAW</span><span class="o">);</span>
<span class="no">GL30</span><span class="o">.</span><span class="na">glVertexAttribPointer</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="n">positionElementCount</span><span class="o">,</span> <span class="no">GL_FLOAT</span><span class="o">,</span> <span class="kc">false</span><span class="o">,</span> <span class="n">positionElementCount</span> <span class="o">*</span> <span class="nc">Float</span><span class="o">.</span><span class="na">BYTES</span><span class="o">,</span> <span class="mi">0</span><span class="o">);</span>
<span class="no">GL30</span><span class="o">.</span><span class="na">glEnableVertexAttribArray</span><span class="o">(</span><span class="mi">0</span><span class="o">);</span>
</pre></table></code></div></div><p>For our IBO we are going to need to specify indices for all four quads in our integer array like so:</p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
</pre><td class="rouge-code"><pre><span class="c1">// Indices</span>
<span class="kt">int</span><span class="o">[]</span> <span class="n">indices</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">int</span><span class="o">[]</span> <span class="o">{</span>
  <span class="c1">// Quad 1</span>
  <span class="mi">0</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span>
  <span class="mi">2</span><span class="o">,</span> <span class="mi">3</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span>

  <span class="c1">// Quad 2</span>
  <span class="mi">4</span><span class="o">,</span> <span class="mi">5</span><span class="o">,</span> <span class="mi">6</span><span class="o">,</span>
  <span class="mi">6</span><span class="o">,</span> <span class="mi">7</span><span class="o">,</span> <span class="mi">4</span><span class="o">,</span>

  <span class="c1">// Quad 3</span>
  <span class="mi">8</span><span class="o">,</span> <span class="mi">9</span><span class="o">,</span> <span class="mi">10</span><span class="o">,</span>
  <span class="mi">10</span><span class="o">,</span> <span class="mi">11</span><span class="o">,</span> <span class="mi">8</span><span class="o">,</span>

  <span class="c1">// Quad 4</span>
  <span class="mi">12</span><span class="o">,</span> <span class="mi">13</span><span class="o">,</span> <span class="mi">14</span><span class="o">,</span>
  <span class="mi">14</span><span class="o">,</span> <span class="mi">15</span><span class="o">,</span> <span class="mi">12</span>
<span class="o">};</span>
</pre></table></code></div></div><p>And then pass them to the GPU using an IBO same as normal again:</p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre><td class="rouge-code"><pre><span class="c1">// IBO (Index Buffer Object)</span>
<span class="nc">IntBuffer</span> <span class="n">iboBuffer</span> <span class="o">=</span> <span class="nc">BufferUtils</span><span class="o">.</span><span class="na">createIntBuffer</span><span class="o">(</span><span class="n">indices</span><span class="o">.</span><span class="na">length</span><span class="o">);</span>
<span class="k">for</span><span class="o">(</span><span class="kt">int</span> <span class="n">index</span> <span class="o">:</span> <span class="n">indices</span><span class="o">)</span> <span class="o">{</span>
  <span class="n">iboBuffer</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">index</span><span class="o">);</span>
<span class="o">}</span>
<span class="n">iboBuffer</span><span class="o">.</span><span class="na">flip</span><span class="o">();</span>

<span class="c1">// Pass data to GPU</span>
<span class="kt">int</span> <span class="n">iboID</span> <span class="o">=</span> <span class="no">GL30</span><span class="o">.</span><span class="na">glGenBuffers</span><span class="o">();</span>
<span class="no">GL30</span><span class="o">.</span><span class="na">glBindBuffer</span><span class="o">(</span><span class="no">GL30</span><span class="o">.</span><span class="na">GL_ELEMENT_ARRAY_BUFFER</span><span class="o">,</span> <span class="n">iboID</span><span class="o">);</span>
<span class="no">GL30</span><span class="o">.</span><span class="na">glBufferData</span><span class="o">(</span><span class="no">GL30</span><span class="o">.</span><span class="na">GL_ELEMENT_ARRAY_BUFFER</span><span class="o">,</span> <span class="n">iboBuffer</span><span class="o">,</span> <span class="no">GL30</span><span class="o">.</span><span class="na">GL_STATIC_DRAW</span><span class="o">);</span>
</pre></table></code></div></div><p>Just to be sure that there is a default shader present we will create one ourselves:</p><p><strong>Application.java</strong></p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
</pre><td class="rouge-code"><pre><span class="c1">// Shaders</span>
<span class="kt">int</span> <span class="n">programID</span> <span class="o">=</span> <span class="no">GL30</span><span class="o">.</span><span class="na">glCreateProgram</span><span class="o">();</span>
<span class="kt">int</span> <span class="n">vertShaderObj</span> <span class="o">=</span> <span class="no">GL30</span><span class="o">.</span><span class="na">glCreateShader</span><span class="o">(</span><span class="no">GL30</span><span class="o">.</span><span class="na">GL_VERTEX_SHADER</span><span class="o">);</span>
<span class="kt">int</span> <span class="n">fragShaderObj</span> <span class="o">=</span> <span class="no">GL30</span><span class="o">.</span><span class="na">glCreateShader</span><span class="o">(</span><span class="no">GL30</span><span class="o">.</span><span class="na">GL_FRAGMENT_SHADER</span><span class="o">);</span>
<span class="nc">String</span> <span class="n">vertexShader</span> <span class="o">=</span> <span class="n">parseShaderFromFile</span><span class="o">(</span><span class="s">"/shaders/vert.shader"</span><span class="o">);</span>
<span class="no">GL30</span><span class="o">.</span><span class="na">glShaderSource</span><span class="o">(</span><span class="n">vertShaderObj</span><span class="o">,</span> <span class="n">vertexShader</span><span class="o">);</span>
<span class="no">GL30</span><span class="o">.</span><span class="na">glCompileShader</span><span class="o">(</span><span class="n">vertShaderObj</span><span class="o">);</span>
<span class="nc">String</span> <span class="n">fragmentShader</span> <span class="o">=</span> <span class="n">parseShaderFromFile</span><span class="o">(</span><span class="s">"/shaders/frag.shader"</span><span class="o">);</span>
<span class="no">GL30</span><span class="o">.</span><span class="na">glShaderSource</span><span class="o">(</span><span class="n">fragShaderObj</span><span class="o">,</span> <span class="n">fragmentShader</span><span class="o">);</span>
<span class="no">GL30</span><span class="o">.</span><span class="na">glCompileShader</span><span class="o">(</span><span class="n">fragShaderObj</span><span class="o">);</span>
<span class="no">GL30</span><span class="o">.</span><span class="na">glAttachShader</span><span class="o">(</span><span class="n">programID</span><span class="o">,</span> <span class="n">vertShaderObj</span><span class="o">);</span>
<span class="no">GL30</span><span class="o">.</span><span class="na">glAttachShader</span><span class="o">(</span><span class="n">programID</span><span class="o">,</span> <span class="n">fragShaderObj</span><span class="o">);</span>
<span class="no">GL30</span><span class="o">.</span><span class="na">glLinkProgram</span><span class="o">(</span><span class="n">programID</span><span class="o">);</span>
<span class="no">GL30</span><span class="o">.</span><span class="na">glValidateProgram</span><span class="o">(</span><span class="n">programID</span><span class="o">);</span>
<span class="no">GL30</span><span class="o">.</span><span class="na">glUseProgram</span><span class="o">(</span><span class="n">programID</span><span class="o">);</span>
</pre></table></code></div></div><p><strong>/shaders/vert.shader</strong></p><div class="language-glsl highlighter-rouge"><div class="code-header"> <span data-label-text="Glsl"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre><span class="cp">#version 410 core
</span>
<span class="k">layout</span><span class="p">(</span><span class="n">location</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span> <span class="k">in</span> <span class="kt">vec2</span> <span class="n">position</span><span class="p">;</span>

<span class="kt">void</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="nb">gl_Position</span> <span class="o">=</span> <span class="kt">vec4</span><span class="p">(</span><span class="n">position</span><span class="p">,</span> <span class="mi">0</span><span class="p">.</span><span class="mi">0</span><span class="n">f</span><span class="p">,</span> <span class="mi">1</span><span class="p">.</span><span class="mi">0</span><span class="n">f</span><span class="p">);</span>
<span class="p">}</span>
</pre></table></code></div></div><p><strong>/shaders/frag.shader</strong></p><div class="language-glsl highlighter-rouge"><div class="code-header"> <span data-label-text="Glsl"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre><span class="cp">#version 410 core
</span>
<span class="kt">void</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="nb">gl_FragColor</span> <span class="o">=</span> <span class="kt">vec4</span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">5</span><span class="n">f</span><span class="p">,</span> <span class="mi">1</span><span class="p">.</span><span class="mi">0</span><span class="n">f</span><span class="p">,</span> <span class="mi">0</span><span class="p">.</span><span class="mi">5</span><span class="p">,</span> <span class="mi">1</span><span class="p">.</span><span class="mi">0</span><span class="n">f</span><span class="p">);</span>
<span class="p">}</span>
</pre></table></code></div></div><p>This should give our quads a green tint. We can now add a draw call to our program and go ahead and run it:</p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="no">GL30</span><span class="o">.</span><span class="na">glDrawElements</span><span class="o">(</span><span class="no">GL30</span><span class="o">.</span><span class="na">GL_TRIANGLES</span><span class="o">,</span> <span class="n">indices</span><span class="o">.</span><span class="na">length</span><span class="o">,</span> <span class="no">GL_UNSIGNED_INT</span><span class="o">,</span> <span class="mi">0</span><span class="o">);</span>
</pre></table></code></div></div><p><img data-src="/assets/img/post/OpenGLBatchRendering/OpenGL_Tutorial_Batch_Rendering_1.png" alt="/assets/img/post/OpenGLBatchRendering/OpenGL_Tutorial_Batch_Rendering_1.png" data-proofer-ignore></p><p>That’s it! We’ve batched together four separate quads into the one draw call. Each has their own unique vertex position attributes laid out in our <code class="language-plaintext highlighter-rouge">vertices</code> array and unique indices in our <code class="language-plaintext highlighter-rouge">indices</code> array. However, there are still quite a few problems with this implementation. How do we color the quads differently? They currently all use the same shader. How do we move the quads after their data has been sent to the GPU using a VBO? Our VBO is still specified as <code class="language-plaintext highlighter-rouge">GL_STATIC_DRAW</code>. That’s what we are going to cover next to make Batch Rendering work just the same as using multiple draw calls.</p><p>Here is the source code for <code class="language-plaintext highlighter-rouge">Application.java</code> which we have written so far:</p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
</pre><td class="rouge-code"><pre><span class="kn">import</span> <span class="nn">org.lwjgl.*</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.lwjgl.glfw.*</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.lwjgl.opengl.*</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.lwjgl.system.*</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.io.BufferedReader</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.InputStreamReader</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.nio.*</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">static</span> <span class="n">org</span><span class="o">.</span><span class="na">lwjgl</span><span class="o">.</span><span class="na">glfw</span><span class="o">.</span><span class="na">Callbacks</span><span class="o">.*;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">org</span><span class="o">.</span><span class="na">lwjgl</span><span class="o">.</span><span class="na">glfw</span><span class="o">.</span><span class="na">GLFW</span><span class="o">.*;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">org</span><span class="o">.</span><span class="na">lwjgl</span><span class="o">.</span><span class="na">opengl</span><span class="o">.</span><span class="na">GL11</span><span class="o">.*;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">org</span><span class="o">.</span><span class="na">lwjgl</span><span class="o">.</span><span class="na">system</span><span class="o">.</span><span class="na">MemoryStack</span><span class="o">.*;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">org</span><span class="o">.</span><span class="na">lwjgl</span><span class="o">.</span><span class="na">system</span><span class="o">.</span><span class="na">MemoryUtil</span><span class="o">.*;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Application</span> <span class="o">{</span>

  <span class="c1">// The window handle</span>
  <span class="kd">private</span> <span class="kt">long</span> <span class="n">window</span><span class="o">;</span>
  <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kt">int</span> <span class="no">WINDOW_WIDTH</span> <span class="o">=</span> <span class="mi">960</span> <span class="o">/</span> <span class="mi">2</span><span class="o">;</span>
  <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kt">int</span> <span class="no">WINDOW_HEIGHT</span> <span class="o">=</span> <span class="mi">960</span> <span class="o">/</span> <span class="mi">2</span><span class="o">;</span>

  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">()</span> <span class="o">{</span>

    <span class="n">init</span><span class="o">();</span>
    <span class="n">loop</span><span class="o">();</span>

    <span class="c1">// Free the window callbacks and destroy the window</span>
    <span class="n">glfwFreeCallbacks</span><span class="o">(</span><span class="n">window</span><span class="o">);</span>
    <span class="n">glfwDestroyWindow</span><span class="o">(</span><span class="n">window</span><span class="o">);</span>

    <span class="c1">// Terminate GLFW and free the error callback</span>
    <span class="n">glfwTerminate</span><span class="o">();</span>
    <span class="n">glfwSetErrorCallback</span><span class="o">(</span><span class="kc">null</span><span class="o">).</span><span class="na">free</span><span class="o">();</span>
  <span class="o">}</span>

  <span class="kd">private</span> <span class="kt">void</span> <span class="nf">init</span><span class="o">()</span> <span class="o">{</span>
    <span class="c1">// Setup an error callback. The default implementation</span>
    <span class="c1">// will print the error message in System.err.</span>
    <span class="nc">GLFWErrorCallback</span><span class="o">.</span><span class="na">createPrint</span><span class="o">(</span><span class="nc">System</span><span class="o">.</span><span class="na">err</span><span class="o">).</span><span class="na">set</span><span class="o">();</span>

    <span class="c1">// Initialize GLFW. Most GLFW functions will not work before doing this.</span>
    <span class="k">if</span> <span class="o">(</span> <span class="o">!</span><span class="n">glfwInit</span><span class="o">()</span> <span class="o">)</span>
      <span class="k">throw</span> <span class="k">new</span> <span class="nf">IllegalStateException</span><span class="o">(</span><span class="s">"Unable to initialize GLFW"</span><span class="o">);</span>

    <span class="c1">// Configure GLFW</span>
    <span class="n">glfwDefaultWindowHints</span><span class="o">();</span> <span class="c1">// optional, the current window hints are already the default</span>
    <span class="n">glfwWindowHint</span><span class="o">(</span><span class="no">GLFW_VISIBLE</span><span class="o">,</span> <span class="no">GLFW_FALSE</span><span class="o">);</span> <span class="c1">// the window will stay hidden after creation</span>
    <span class="n">glfwWindowHint</span><span class="o">(</span><span class="no">GLFW_RESIZABLE</span><span class="o">,</span> <span class="no">GLFW_TRUE</span><span class="o">);</span> <span class="c1">// the window will be resizable</span>

    <span class="c1">// Create the window</span>
    <span class="n">window</span> <span class="o">=</span> <span class="n">glfwCreateWindow</span><span class="o">(</span><span class="no">WINDOW_WIDTH</span><span class="o">,</span> <span class="no">WINDOW_HEIGHT</span><span class="o">,</span> <span class="s">"Batch Rendering Tutorial"</span><span class="o">,</span> <span class="no">NULL</span><span class="o">,</span> <span class="no">NULL</span><span class="o">);</span>
    <span class="k">if</span> <span class="o">(</span> <span class="n">window</span> <span class="o">==</span> <span class="no">NULL</span> <span class="o">)</span>
      <span class="k">throw</span> <span class="k">new</span> <span class="nf">RuntimeException</span><span class="o">(</span><span class="s">"Failed to create the GLFW window"</span><span class="o">);</span>

    <span class="c1">// Setup a key callback. It will be called every time a key is pressed, repeated or released.</span>
    <span class="n">glfwSetKeyCallback</span><span class="o">(</span><span class="n">window</span><span class="o">,</span> <span class="o">(</span><span class="n">window</span><span class="o">,</span> <span class="n">key</span><span class="o">,</span> <span class="n">scancode</span><span class="o">,</span> <span class="n">action</span><span class="o">,</span> <span class="n">mods</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="o">{</span>
      <span class="k">if</span> <span class="o">(</span> <span class="n">key</span> <span class="o">==</span> <span class="no">GLFW_KEY_ESCAPE</span> <span class="o">&amp;&amp;</span> <span class="n">action</span> <span class="o">==</span> <span class="no">GLFW_RELEASE</span> <span class="o">)</span>
        <span class="n">glfwSetWindowShouldClose</span><span class="o">(</span><span class="n">window</span><span class="o">,</span> <span class="kc">true</span><span class="o">);</span> <span class="c1">// We will detect this in the rendering loop</span>
    <span class="o">});</span>

    <span class="c1">// Get the thread stack and push a new frame</span>
    <span class="k">try</span> <span class="o">(</span> <span class="nc">MemoryStack</span> <span class="n">stack</span> <span class="o">=</span> <span class="n">stackPush</span><span class="o">()</span> <span class="o">)</span> <span class="o">{</span>
      <span class="nc">IntBuffer</span> <span class="n">pWidth</span> <span class="o">=</span> <span class="n">stack</span><span class="o">.</span><span class="na">mallocInt</span><span class="o">(</span><span class="mi">1</span><span class="o">);</span> <span class="c1">// int*</span>
      <span class="nc">IntBuffer</span> <span class="n">pHeight</span> <span class="o">=</span> <span class="n">stack</span><span class="o">.</span><span class="na">mallocInt</span><span class="o">(</span><span class="mi">1</span><span class="o">);</span> <span class="c1">// int*</span>

      <span class="c1">// Get the window size passed to glfwCreateWindow</span>
      <span class="n">glfwGetWindowSize</span><span class="o">(</span><span class="n">window</span><span class="o">,</span> <span class="n">pWidth</span><span class="o">,</span> <span class="n">pHeight</span><span class="o">);</span>

      <span class="c1">// Get the resolution of the primary monitor</span>
      <span class="nc">GLFWVidMode</span> <span class="n">vidmode</span> <span class="o">=</span> <span class="n">glfwGetVideoMode</span><span class="o">(</span><span class="n">glfwGetPrimaryMonitor</span><span class="o">());</span>

      <span class="c1">// Center the window</span>
      <span class="n">glfwSetWindowPos</span><span class="o">(</span>
        <span class="n">window</span><span class="o">,</span>
        <span class="o">(</span><span class="n">vidmode</span><span class="o">.</span><span class="na">width</span><span class="o">()</span> <span class="o">-</span> <span class="n">pWidth</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="mi">0</span><span class="o">))</span> <span class="o">/</span> <span class="mi">2</span><span class="o">,</span>
        <span class="o">(</span><span class="n">vidmode</span><span class="o">.</span><span class="na">height</span><span class="o">()</span> <span class="o">-</span> <span class="n">pHeight</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="mi">0</span><span class="o">))</span> <span class="o">/</span> <span class="mi">2</span>
      <span class="o">);</span>
    <span class="o">}</span> <span class="c1">// the stack frame is popped automatically</span>

    <span class="c1">// Make the OpenGL context current</span>
    <span class="n">glfwMakeContextCurrent</span><span class="o">(</span><span class="n">window</span><span class="o">);</span>
    <span class="c1">// Enable v-sync</span>
    <span class="n">glfwSwapInterval</span><span class="o">(</span><span class="mi">1</span><span class="o">);</span>

    <span class="c1">// Make the window visible</span>
    <span class="n">glfwShowWindow</span><span class="o">(</span><span class="n">window</span><span class="o">);</span>
  <span class="o">}</span>

  <span class="kd">private</span> <span class="kt">void</span> <span class="nf">loop</span><span class="o">()</span> <span class="o">{</span>
    <span class="c1">// This line is critical for LWJGL's interoperation with GLFW's</span>
    <span class="c1">// OpenGL context, or any context that is managed externally.</span>
    <span class="c1">// LWJGL detects the context that is current in the current thread,</span>
    <span class="c1">// creates the GLCapabilities instance and makes the OpenGL</span>
    <span class="c1">// bindings available for use.</span>
    <span class="no">GL</span><span class="o">.</span><span class="na">createCapabilities</span><span class="o">();</span>

    <span class="c1">// Set the clear color</span>
    <span class="n">glClearColor</span><span class="o">(</span><span class="mf">1.0f</span><span class="o">,</span> <span class="mf">0.0f</span><span class="o">,</span> <span class="mf">0.0f</span><span class="o">,</span> <span class="mf">0.0f</span><span class="o">);</span>

    <span class="kt">float</span><span class="o">[]</span> <span class="n">vertices</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">float</span><span class="o">[]</span> <span class="o">{</span>
      <span class="c1">// Quad 1 - Top Left</span>
      <span class="o">-</span><span class="mf">0.75f</span><span class="o">,</span>  <span class="mf">0.75f</span><span class="o">,</span>
      <span class="o">-</span><span class="mf">0.75f</span><span class="o">,</span>  <span class="mf">0.25f</span><span class="o">,</span>
      <span class="o">-</span><span class="mf">0.25f</span><span class="o">,</span>  <span class="mf">0.25f</span><span class="o">,</span>
      <span class="o">-</span><span class="mf">0.25f</span><span class="o">,</span>  <span class="mf">0.75f</span><span class="o">,</span>

      <span class="c1">// Quad 2 - Bottom Left</span>
      <span class="o">-</span><span class="mf">0.75f</span><span class="o">,</span> <span class="o">-</span><span class="mf">0.25f</span><span class="o">,</span>
      <span class="o">-</span><span class="mf">0.75f</span><span class="o">,</span> <span class="o">-</span><span class="mf">0.75f</span><span class="o">,</span>
      <span class="o">-</span><span class="mf">0.25f</span><span class="o">,</span> <span class="o">-</span><span class="mf">0.75f</span><span class="o">,</span>
      <span class="o">-</span><span class="mf">0.25f</span><span class="o">,</span> <span class="o">-</span><span class="mf">0.25f</span><span class="o">,</span>

      <span class="c1">// Quad 3 - Bottom Right</span>
      <span class="mf">0.25f</span><span class="o">,</span> <span class="o">-</span><span class="mf">0.25f</span><span class="o">,</span>
      <span class="mf">0.25f</span><span class="o">,</span> <span class="o">-</span><span class="mf">0.75f</span><span class="o">,</span>
      <span class="mf">0.75f</span><span class="o">,</span> <span class="o">-</span><span class="mf">0.75f</span><span class="o">,</span>
      <span class="mf">0.75f</span><span class="o">,</span> <span class="o">-</span><span class="mf">0.25f</span><span class="o">,</span>

      <span class="c1">// Quad 4 - Top Right</span>
      <span class="mf">0.25f</span><span class="o">,</span> <span class="mf">0.75f</span><span class="o">,</span>
      <span class="mf">0.25f</span><span class="o">,</span> <span class="mf">0.25f</span><span class="o">,</span>
      <span class="mf">0.75f</span><span class="o">,</span> <span class="mf">0.25f</span><span class="o">,</span>
      <span class="mf">0.75f</span><span class="o">,</span> <span class="mf">0.75f</span>
      <span class="o">};</span>

    <span class="c1">// VBO (Vertex Buffer Object)</span>
    <span class="nc">FloatBuffer</span> <span class="n">vboBuffer</span> <span class="o">=</span> <span class="nc">BufferUtils</span><span class="o">.</span><span class="na">createFloatBuffer</span><span class="o">(</span><span class="n">vertices</span><span class="o">.</span><span class="na">length</span><span class="o">);</span>
    <span class="k">for</span><span class="o">(</span><span class="kt">float</span> <span class="n">vertex</span> <span class="o">:</span> <span class="n">vertices</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">vboBuffer</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">vertex</span><span class="o">);</span>
    <span class="o">}</span>
    <span class="n">vboBuffer</span><span class="o">.</span><span class="na">flip</span><span class="o">();</span>

    <span class="c1">// Pass data to GPU</span>
    <span class="kt">int</span> <span class="n">positionElementCount</span> <span class="o">=</span> <span class="n">vertices</span><span class="o">.</span><span class="na">length</span> <span class="o">/</span> <span class="mi">16</span><span class="o">;</span>
    <span class="kt">int</span> <span class="n">vboID</span> <span class="o">=</span> <span class="no">GL30</span><span class="o">.</span><span class="na">glGenBuffers</span><span class="o">();</span>
    <span class="no">GL30</span><span class="o">.</span><span class="na">glBindBuffer</span><span class="o">(</span><span class="no">GL30</span><span class="o">.</span><span class="na">GL_ARRAY_BUFFER</span><span class="o">,</span> <span class="n">vboID</span><span class="o">);</span>
    <span class="no">GL30</span><span class="o">.</span><span class="na">glBufferData</span><span class="o">(</span><span class="no">GL30</span><span class="o">.</span><span class="na">GL_ARRAY_BUFFER</span><span class="o">,</span> <span class="n">vboBuffer</span><span class="o">,</span> <span class="no">GL30</span><span class="o">.</span><span class="na">GL_STATIC_DRAW</span><span class="o">);</span>
    <span class="no">GL30</span><span class="o">.</span><span class="na">glVertexAttribPointer</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="n">positionElementCount</span><span class="o">,</span> <span class="no">GL_FLOAT</span><span class="o">,</span> <span class="kc">false</span><span class="o">,</span> <span class="n">positionElementCount</span> <span class="o">*</span> <span class="nc">Float</span><span class="o">.</span><span class="na">BYTES</span><span class="o">,</span> <span class="mi">0</span><span class="o">);</span>
    <span class="no">GL30</span><span class="o">.</span><span class="na">glEnableVertexAttribArray</span><span class="o">(</span><span class="mi">0</span><span class="o">);</span>

    <span class="c1">// Indices</span>
    <span class="kt">int</span><span class="o">[]</span> <span class="n">indices</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">int</span><span class="o">[]</span> <span class="o">{</span>
      <span class="c1">// Quad 1</span>
      <span class="mi">0</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span>
      <span class="mi">2</span><span class="o">,</span> <span class="mi">3</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span>

      <span class="c1">// Quad 2</span>
      <span class="mi">4</span><span class="o">,</span> <span class="mi">5</span><span class="o">,</span> <span class="mi">6</span><span class="o">,</span>
      <span class="mi">6</span><span class="o">,</span> <span class="mi">7</span><span class="o">,</span> <span class="mi">4</span><span class="o">,</span>

      <span class="c1">// Quad 3</span>
      <span class="mi">8</span><span class="o">,</span> <span class="mi">9</span><span class="o">,</span> <span class="mi">10</span><span class="o">,</span>
      <span class="mi">10</span><span class="o">,</span> <span class="mi">11</span><span class="o">,</span> <span class="mi">8</span><span class="o">,</span>

      <span class="c1">// Quad 4</span>
      <span class="mi">12</span><span class="o">,</span> <span class="mi">13</span><span class="o">,</span> <span class="mi">14</span><span class="o">,</span>
      <span class="mi">14</span><span class="o">,</span> <span class="mi">15</span><span class="o">,</span> <span class="mi">12</span>
      <span class="o">};</span>

    <span class="c1">// IBO (Index Buffer Object)</span>
    <span class="nc">IntBuffer</span> <span class="n">iboBuffer</span> <span class="o">=</span> <span class="nc">BufferUtils</span><span class="o">.</span><span class="na">createIntBuffer</span><span class="o">(</span><span class="n">indices</span><span class="o">.</span><span class="na">length</span><span class="o">);</span>
    <span class="k">for</span><span class="o">(</span><span class="kt">int</span> <span class="n">index</span> <span class="o">:</span> <span class="n">indices</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">iboBuffer</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">index</span><span class="o">);</span>
    <span class="o">}</span>
    <span class="n">iboBuffer</span><span class="o">.</span><span class="na">flip</span><span class="o">();</span>

    <span class="c1">// Pass data to GPU</span>
    <span class="kt">int</span> <span class="n">iboID</span> <span class="o">=</span> <span class="no">GL30</span><span class="o">.</span><span class="na">glGenBuffers</span><span class="o">();</span>
    <span class="no">GL30</span><span class="o">.</span><span class="na">glBindBuffer</span><span class="o">(</span><span class="no">GL30</span><span class="o">.</span><span class="na">GL_ELEMENT_ARRAY_BUFFER</span><span class="o">,</span> <span class="n">iboID</span><span class="o">);</span>
    <span class="no">GL30</span><span class="o">.</span><span class="na">glBufferData</span><span class="o">(</span><span class="no">GL30</span><span class="o">.</span><span class="na">GL_ELEMENT_ARRAY_BUFFER</span><span class="o">,</span> <span class="n">iboBuffer</span><span class="o">,</span> <span class="no">GL30</span><span class="o">.</span><span class="na">GL_STATIC_DRAW</span><span class="o">);</span>

    <span class="c1">// Shaders</span>
    <span class="kt">int</span> <span class="n">programID</span> <span class="o">=</span> <span class="no">GL30</span><span class="o">.</span><span class="na">glCreateProgram</span><span class="o">();</span>
    <span class="kt">int</span> <span class="n">vertShaderObj</span> <span class="o">=</span> <span class="no">GL30</span><span class="o">.</span><span class="na">glCreateShader</span><span class="o">(</span><span class="no">GL30</span><span class="o">.</span><span class="na">GL_VERTEX_SHADER</span><span class="o">);</span>
    <span class="kt">int</span> <span class="n">fragShaderObj</span> <span class="o">=</span> <span class="no">GL30</span><span class="o">.</span><span class="na">glCreateShader</span><span class="o">(</span><span class="no">GL30</span><span class="o">.</span><span class="na">GL_FRAGMENT_SHADER</span><span class="o">);</span>
    <span class="nc">String</span> <span class="n">vertexShader</span> <span class="o">=</span> <span class="n">parseShaderFromFile</span><span class="o">(</span><span class="s">"/shaders/vert.shader"</span><span class="o">);</span>
    <span class="no">GL30</span><span class="o">.</span><span class="na">glShaderSource</span><span class="o">(</span><span class="n">vertShaderObj</span><span class="o">,</span> <span class="n">vertexShader</span><span class="o">);</span>
    <span class="no">GL30</span><span class="o">.</span><span class="na">glCompileShader</span><span class="o">(</span><span class="n">vertShaderObj</span><span class="o">);</span>
    <span class="nc">String</span> <span class="n">fragmentShader</span> <span class="o">=</span> <span class="n">parseShaderFromFile</span><span class="o">(</span><span class="s">"/shaders/frag.shader"</span><span class="o">);</span>
    <span class="no">GL30</span><span class="o">.</span><span class="na">glShaderSource</span><span class="o">(</span><span class="n">fragShaderObj</span><span class="o">,</span> <span class="n">fragmentShader</span><span class="o">);</span>
    <span class="no">GL30</span><span class="o">.</span><span class="na">glCompileShader</span><span class="o">(</span><span class="n">fragShaderObj</span><span class="o">);</span>
    <span class="no">GL30</span><span class="o">.</span><span class="na">glAttachShader</span><span class="o">(</span><span class="n">programID</span><span class="o">,</span> <span class="n">vertShaderObj</span><span class="o">);</span>
    <span class="no">GL30</span><span class="o">.</span><span class="na">glAttachShader</span><span class="o">(</span><span class="n">programID</span><span class="o">,</span> <span class="n">fragShaderObj</span><span class="o">);</span>
    <span class="no">GL30</span><span class="o">.</span><span class="na">glLinkProgram</span><span class="o">(</span><span class="n">programID</span><span class="o">);</span>
    <span class="no">GL30</span><span class="o">.</span><span class="na">glValidateProgram</span><span class="o">(</span><span class="n">programID</span><span class="o">);</span>
    <span class="no">GL30</span><span class="o">.</span><span class="na">glUseProgram</span><span class="o">(</span><span class="n">programID</span><span class="o">);</span>



    <span class="c1">// Run the rendering loop until the user has attempted to close</span>
    <span class="c1">// the window or has pressed the ESCAPE key.</span>
    <span class="k">while</span> <span class="o">(</span> <span class="o">!</span><span class="n">glfwWindowShouldClose</span><span class="o">(</span><span class="n">window</span><span class="o">)</span> <span class="o">)</span> <span class="o">{</span>
      <span class="n">glClear</span><span class="o">(</span><span class="no">GL_COLOR_BUFFER_BIT</span> <span class="o">|</span> <span class="no">GL_DEPTH_BUFFER_BIT</span><span class="o">);</span> <span class="c1">// clear the framebuffer</span>

      <span class="no">GL30</span><span class="o">.</span><span class="na">glDrawElements</span><span class="o">(</span><span class="no">GL30</span><span class="o">.</span><span class="na">GL_TRIANGLES</span><span class="o">,</span> <span class="n">indices</span><span class="o">.</span><span class="na">length</span><span class="o">,</span> <span class="no">GL_UNSIGNED_INT</span><span class="o">,</span> <span class="mi">0</span><span class="o">);</span> <span class="c1">//Draw our squares</span>

      <span class="n">glfwSwapBuffers</span><span class="o">(</span><span class="n">window</span><span class="o">);</span> <span class="c1">// swap the color buffers</span>
      <span class="c1">// Poll for window events. The key callback above will only be</span>
      <span class="c1">// invoked during this call.</span>
      <span class="n">glfwPollEvents</span><span class="o">();</span>
    <span class="o">}</span>
  <span class="o">}</span>

  <span class="kd">private</span> <span class="kd">static</span> <span class="nc">String</span> <span class="nf">parseShaderFromFile</span><span class="o">(</span><span class="nc">String</span> <span class="n">filePath</span><span class="o">)</span> <span class="o">{</span>
    <span class="nc">StringBuilder</span> <span class="n">data</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">StringBuilder</span><span class="o">();</span>
    <span class="nc">String</span> <span class="n">line</span> <span class="o">=</span> <span class="s">""</span><span class="o">;</span>
    <span class="k">try</span> <span class="o">{</span>
      <span class="nc">BufferedReader</span> <span class="n">reader</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">BufferedReader</span><span class="o">(</span><span class="k">new</span> <span class="nc">InputStreamReader</span><span class="o">(</span><span class="nc">Application</span><span class="o">.</span><span class="na">class</span><span class="o">.</span><span class="na">getResourceAsStream</span><span class="o">(</span><span class="n">filePath</span><span class="o">)));</span>
      <span class="n">line</span> <span class="o">=</span> <span class="n">reader</span><span class="o">.</span><span class="na">readLine</span><span class="o">();</span>
      <span class="k">while</span><span class="o">(</span> <span class="n">line</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">)</span>
      <span class="o">{</span>
        <span class="n">data</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="n">line</span><span class="o">);</span>
        <span class="n">data</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="sc">'\n'</span><span class="o">);</span>
        <span class="n">line</span> <span class="o">=</span> <span class="n">reader</span><span class="o">.</span><span class="na">readLine</span><span class="o">();</span>
      <span class="o">}</span>
    <span class="o">}</span>
    <span class="k">catch</span><span class="o">(</span><span class="nc">Exception</span> <span class="n">e</span><span class="o">)</span>
    <span class="o">{</span>
      <span class="k">throw</span> <span class="k">new</span> <span class="nf">IllegalArgumentException</span><span class="o">(</span><span class="s">"Unable to load shader from: "</span> <span class="o">+</span> <span class="n">filePath</span><span class="o">,</span> <span class="n">e</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="k">return</span> <span class="n">data</span><span class="o">.</span><span class="na">toString</span><span class="o">();</span>
  <span class="o">}</span>

  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">new</span> <span class="nf">Application</span><span class="o">().</span><span class="na">run</span><span class="o">();</span>
  <span class="o">}</span>

<span class="o">}</span>
</pre></table></code></div></div><h2 id="batch-rendering---colors"><span class="mr-2">Batch Rendering - Colors</span><a href="#batch-rendering---colors" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><p>Let’s start by coloring our quads differently. You may remember in my earlier tutorial I discussed how vertices can contain all kinds of vertex attributes, not just position. This is where we can make use of that. We can store the color of each vertex as an attribute within our <code class="language-plaintext highlighter-rouge">vertices</code> array and then tell the GPU the position, size, etc of this attribute. Here is what our new vertices array will be:</p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
</pre><td class="rouge-code"><pre><span class="kt">float</span><span class="o">[]</span> <span class="n">vertices</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">float</span><span class="o">[]</span> <span class="o">{</span>
  <span class="c1">// Quad 1 - Top Left (Black)</span>
  <span class="o">-</span><span class="mf">0.75f</span><span class="o">,</span>  <span class="mf">0.75f</span><span class="o">,</span> <span class="mf">1.0f</span><span class="o">,</span> <span class="mf">1.0f</span><span class="o">,</span> <span class="mf">1.0f</span><span class="o">,</span>
  <span class="o">-</span><span class="mf">0.75f</span><span class="o">,</span>  <span class="mf">0.25f</span><span class="o">,</span> <span class="mf">1.0f</span><span class="o">,</span> <span class="mf">1.0f</span><span class="o">,</span> <span class="mf">1.0f</span><span class="o">,</span>
  <span class="o">-</span><span class="mf">0.25f</span><span class="o">,</span>  <span class="mf">0.25f</span><span class="o">,</span> <span class="mf">1.0f</span><span class="o">,</span> <span class="mf">1.0f</span><span class="o">,</span> <span class="mf">1.0f</span><span class="o">,</span>
  <span class="o">-</span><span class="mf">0.25f</span><span class="o">,</span>  <span class="mf">0.75f</span><span class="o">,</span> <span class="mf">1.0f</span><span class="o">,</span> <span class="mf">1.0f</span><span class="o">,</span> <span class="mf">1.0f</span><span class="o">,</span>

  <span class="c1">// Quad 2 - Bottom Left (White)</span>
  <span class="o">-</span><span class="mf">0.75f</span><span class="o">,</span> <span class="o">-</span><span class="mf">0.25f</span><span class="o">,</span> <span class="mf">0.0f</span><span class="o">,</span> <span class="mf">0.0f</span><span class="o">,</span> <span class="mf">0.0f</span><span class="o">,</span>
  <span class="o">-</span><span class="mf">0.75f</span><span class="o">,</span> <span class="o">-</span><span class="mf">0.75f</span><span class="o">,</span> <span class="mf">0.0f</span><span class="o">,</span> <span class="mf">0.0f</span><span class="o">,</span> <span class="mf">0.0f</span><span class="o">,</span>
  <span class="o">-</span><span class="mf">0.25f</span><span class="o">,</span> <span class="o">-</span><span class="mf">0.75f</span><span class="o">,</span> <span class="mf">0.0f</span><span class="o">,</span> <span class="mf">0.0f</span><span class="o">,</span> <span class="mf">0.0f</span><span class="o">,</span>
  <span class="o">-</span><span class="mf">0.25f</span><span class="o">,</span> <span class="o">-</span><span class="mf">0.25f</span><span class="o">,</span> <span class="mf">0.0f</span><span class="o">,</span> <span class="mf">0.0f</span><span class="o">,</span> <span class="mf">0.0f</span><span class="o">,</span>

  <span class="c1">// Quad 3 - Bottom Right (Green)</span>
  <span class="mf">0.25f</span><span class="o">,</span> <span class="o">-</span><span class="mf">0.25f</span><span class="o">,</span> <span class="mf">0.0f</span><span class="o">,</span> <span class="mf">1.0f</span><span class="o">,</span> <span class="mf">0.0f</span><span class="o">,</span>
  <span class="mf">0.25f</span><span class="o">,</span> <span class="o">-</span><span class="mf">0.75f</span><span class="o">,</span> <span class="mf">0.0f</span><span class="o">,</span> <span class="mf">1.0f</span><span class="o">,</span> <span class="mf">0.0f</span><span class="o">,</span>
  <span class="mf">0.75f</span><span class="o">,</span> <span class="o">-</span><span class="mf">0.75f</span><span class="o">,</span> <span class="mf">0.0f</span><span class="o">,</span> <span class="mf">1.0f</span><span class="o">,</span> <span class="mf">0.0f</span><span class="o">,</span>
  <span class="mf">0.75f</span><span class="o">,</span> <span class="o">-</span><span class="mf">0.25f</span><span class="o">,</span> <span class="mf">0.0f</span><span class="o">,</span> <span class="mf">1.0f</span><span class="o">,</span> <span class="mf">0.0f</span><span class="o">,</span>

  <span class="c1">// Quad 4 - Top Right (Blue)</span>
  <span class="mf">0.25f</span><span class="o">,</span> <span class="mf">0.75f</span><span class="o">,</span> <span class="mf">0.0f</span><span class="o">,</span> <span class="mf">0.0f</span><span class="o">,</span> <span class="mf">1.0f</span><span class="o">,</span>
  <span class="mf">0.25f</span><span class="o">,</span> <span class="mf">0.25f</span><span class="o">,</span> <span class="mf">0.0f</span><span class="o">,</span> <span class="mf">0.0f</span><span class="o">,</span> <span class="mf">1.0f</span><span class="o">,</span>
  <span class="mf">0.75f</span><span class="o">,</span> <span class="mf">0.25f</span><span class="o">,</span> <span class="mf">0.0f</span><span class="o">,</span> <span class="mf">0.0f</span><span class="o">,</span> <span class="mf">1.0f</span><span class="o">,</span>
  <span class="mf">0.75f</span><span class="o">,</span> <span class="mf">0.75f</span><span class="o">,</span> <span class="mf">0.0f</span><span class="o">,</span> <span class="mf">0.0f</span><span class="o">,</span> <span class="mf">1.0f</span>
<span class="o">};</span>
</pre></table></code></div></div><p>Now the composition of each quad looks like this:</p><p><img data-src="/assets/img/post/OpenGLBatchRendering/OpenGL_Tutorial_Batch_Rendering_2.png" alt="/assets/img/post/OpenGLBatchRendering/OpenGL_Tutorial_Batch_Rendering_2.png" data-proofer-ignore></p><p>The GPU still does not know that we have placed this data there and presumes every two floats is position data so we are going to need to change this in our VBO by adding a new vertex attribute pointer using <code class="language-plaintext highlighter-rouge">glVertexAttribPointer</code>:</p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre><td class="rouge-code"><pre><span class="c1">// Pass data to GPU</span>
<span class="kt">int</span> <span class="n">positionElementCount</span> <span class="o">=</span> <span class="mi">2</span><span class="o">;</span>
<span class="kt">int</span> <span class="n">colorElementCount</span> <span class="o">=</span> <span class="mi">3</span><span class="o">;</span>
<span class="kt">int</span> <span class="n">stride</span> <span class="o">=</span> <span class="o">(</span><span class="n">positionElementCount</span> <span class="o">*</span> <span class="nc">Float</span><span class="o">.</span><span class="na">BYTES</span><span class="o">)</span> <span class="o">+</span> <span class="o">(</span><span class="n">colorElementCount</span> <span class="o">*</span> <span class="nc">Float</span><span class="o">.</span><span class="na">BYTES</span><span class="o">);</span>
<span class="kt">int</span> <span class="n">vboID</span> <span class="o">=</span> <span class="no">GL30</span><span class="o">.</span><span class="na">glGenBuffers</span><span class="o">();</span>
<span class="no">GL30</span><span class="o">.</span><span class="na">glBindBuffer</span><span class="o">(</span><span class="no">GL30</span><span class="o">.</span><span class="na">GL_ARRAY_BUFFER</span><span class="o">,</span> <span class="n">vboID</span><span class="o">);</span>
<span class="no">GL30</span><span class="o">.</span><span class="na">glBufferData</span><span class="o">(</span><span class="no">GL30</span><span class="o">.</span><span class="na">GL_ARRAY_BUFFER</span><span class="o">,</span> <span class="n">vboBuffer</span><span class="o">,</span> <span class="no">GL30</span><span class="o">.</span><span class="na">GL_STATIC_DRAW</span><span class="o">);</span>
<span class="no">GL30</span><span class="o">.</span><span class="na">glVertexAttribPointer</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="n">positionElementCount</span><span class="o">,</span> <span class="no">GL_FLOAT</span><span class="o">,</span> <span class="kc">false</span><span class="o">,</span> <span class="n">stride</span><span class="o">,</span> <span class="mi">0</span><span class="o">);</span>
<span class="no">GL30</span><span class="o">.</span><span class="na">glVertexAttribPointer</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="n">colorElementCount</span><span class="o">,</span> <span class="no">GL_FLOAT</span><span class="o">,</span> <span class="kc">false</span><span class="o">,</span> <span class="n">stride</span><span class="o">,</span> <span class="n">positionElementCount</span> <span class="o">*</span> <span class="nc">Float</span><span class="o">.</span><span class="na">BYTES</span><span class="o">);</span>
<span class="no">GL30</span><span class="o">.</span><span class="na">glEnableVertexAttribArray</span><span class="o">(</span><span class="mi">0</span><span class="o">);</span>
<span class="no">GL30</span><span class="o">.</span><span class="na">glEnableVertexAttribArray</span><span class="o">(</span><span class="mi">1</span><span class="o">);</span>
</pre></table></code></div></div><p>There are only a few slight differences this time. Firstly, we need to provide a new value for the stride for both of our vertex attributes. The stride is simply how many bytes one vertex takes up so we calculate it above. Then finally the last parameter has been changed. This parameter is an offset into our vertices data, this offset being the beginning of that vertex attribute. Our color attribute begins two floats in from the start (after the first position attribute) so we set it to two floats worth of bytes.</p><p>We can now go ahead and use this new color data within our shaders. First we take in the data inside of our vertex shader in the same way we did for the position data. Then we create a varying to pass the color data over to the fragment shader where we can actually apply it to our quad:</p><div class="language-glsl highlighter-rouge"><div class="code-header"> <span data-label-text="Glsl"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre><td class="rouge-code"><pre><span class="cp">#version 410 core
</span>
<span class="k">layout</span><span class="p">(</span><span class="n">location</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span> <span class="k">in</span> <span class="kt">vec2</span> <span class="n">position</span><span class="p">;</span>
<span class="k">layout</span><span class="p">(</span><span class="n">location</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span> <span class="k">in</span> <span class="kt">vec3</span> <span class="n">color</span><span class="p">;</span>

<span class="k">out</span> <span class="kt">vec3</span> <span class="n">v_Color</span><span class="p">;</span>

<span class="kt">void</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="nb">gl_Position</span> <span class="o">=</span> <span class="kt">vec4</span><span class="p">(</span><span class="n">position</span><span class="p">,</span> <span class="mi">0</span><span class="p">.</span><span class="mi">0</span><span class="n">f</span><span class="p">,</span> <span class="mi">1</span><span class="p">.</span><span class="mi">0</span><span class="n">f</span><span class="p">);</span>
    <span class="n">v_Color</span> <span class="o">=</span> <span class="n">color</span><span class="p">;</span>
<span class="p">}</span>
</pre></table></code></div></div><p>(Note the color data is 3 floats long so it is taken is as a vec3)</p><p>Now we can go ahead and use this data in our fragment shader to color the quad using <code class="language-plaintext highlighter-rouge">gl_FragColor</code>:</p><div class="language-glsl highlighter-rouge"><div class="code-header"> <span data-label-text="Glsl"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre><span class="cp">#version 410 core
</span>
<span class="k">in</span> <span class="kt">vec3</span> <span class="n">v_Color</span><span class="p">;</span>

<span class="kt">void</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="nb">gl_FragColor</span> <span class="o">=</span> <span class="kt">vec4</span><span class="p">(</span><span class="n">v_Color</span><span class="p">,</span> <span class="mi">1</span><span class="p">.</span><span class="mi">0</span><span class="n">f</span><span class="p">);</span>
<span class="p">}</span>
</pre></table></code></div></div><p>If everything is working correctly we should now be able to run our code and see the following output:</p><p><img data-src="/assets/img/post/OpenGLBatchRendering/OpenGL_Tutorial_Batch_Rendering_3.png" alt="/assets/img/post/OpenGLBatchRendering/OpenGL_Tutorial_Batch_Rendering_3.png" data-proofer-ignore></p><p>As you can see we have now successfully batch rendered four separate quads with different colors for each. The final challenge we may run into is moving the quads independent of one another (ie, without using an MVP Matrix as this will move all of them together). For this we need some way in which to update our VBO while the programming is running.</p><h2 id="dynamic-vbos"><span class="mr-2">Dynamic VBOs</span><a href="#dynamic-vbos" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><p>As mentioned a few times previously when we passed data into a Vertex Buffer Object we told it that this data would never change using <code class="language-plaintext highlighter-rouge">GL_STATIC_DRAW</code>. This meant we could never update the vertex positions to move around our quad. However, now that we have implemented Batch Rendering we know why it is necessary to be able to do exactly that. Therefore we can create a Dynamic VBO using <code class="language-plaintext highlighter-rouge">GL_DYNAMIC_DRAW</code>. To demonstrate this we are going to make a new quad get added to the screen while the program is running and also modify the position of one of the other quads.</p><p>First let’s go ahead and make our VBO dynamic. Insead of passing data directly to <code class="language-plaintext highlighter-rouge">glBufferData</code> we can instead allocate the amount of memory we are going to use. Here we do that by allocating the size of our <code class="language-plaintext highlighter-rouge">vboBuffer</code> FloatBuffer in bytes:</p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre><td class="rouge-code"><pre><span class="c1">// Pass data to GPU</span>
<span class="kt">int</span> <span class="n">positionElementCount</span> <span class="o">=</span> <span class="mi">2</span><span class="o">;</span>
<span class="kt">int</span> <span class="n">colorElementCount</span> <span class="o">=</span> <span class="mi">3</span><span class="o">;</span>
<span class="kt">int</span> <span class="n">stride</span> <span class="o">=</span> <span class="o">(</span><span class="n">positionElementCount</span> <span class="o">*</span> <span class="nc">Float</span><span class="o">.</span><span class="na">BYTES</span><span class="o">)</span> <span class="o">+</span> <span class="o">(</span><span class="n">colorElementCount</span> <span class="o">*</span> <span class="nc">Float</span><span class="o">.</span><span class="na">BYTES</span><span class="o">);</span>
<span class="kt">int</span> <span class="n">vboID</span> <span class="o">=</span> <span class="no">GL30</span><span class="o">.</span><span class="na">glGenBuffers</span><span class="o">();</span>
<span class="no">GL30</span><span class="o">.</span><span class="na">glBindBuffer</span><span class="o">(</span><span class="no">GL30</span><span class="o">.</span><span class="na">GL_ARRAY_BUFFER</span><span class="o">,</span> <span class="n">vboID</span><span class="o">);</span>
<span class="no">GL30</span><span class="o">.</span><span class="na">glBufferData</span><span class="o">(</span><span class="no">GL30</span><span class="o">.</span><span class="na">GL_ARRAY_BUFFER</span><span class="o">,</span> <span class="n">vboBuffer</span><span class="o">.</span><span class="na">capacity</span><span class="o">()</span> <span class="o">*</span> <span class="nc">Float</span><span class="o">.</span><span class="na">BYTES</span><span class="o">,</span> <span class="no">GL30</span><span class="o">.</span><span class="na">GL_DYNAMIC_DRAW</span><span class="o">);</span>
<span class="no">GL30</span><span class="o">.</span><span class="na">glVertexAttribPointer</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="n">positionElementCount</span><span class="o">,</span> <span class="no">GL_FLOAT</span><span class="o">,</span> <span class="kc">false</span><span class="o">,</span> <span class="n">stride</span><span class="o">,</span> <span class="mi">0</span><span class="o">);</span>
<span class="no">GL30</span><span class="o">.</span><span class="na">glVertexAttribPointer</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="n">colorElementCount</span><span class="o">,</span> <span class="no">GL_FLOAT</span><span class="o">,</span> <span class="kc">false</span><span class="o">,</span> <span class="n">stride</span><span class="o">,</span> <span class="n">positionElementCount</span> <span class="o">*</span> <span class="nc">Float</span><span class="o">.</span><span class="na">BYTES</span><span class="o">);</span>
<span class="no">GL30</span><span class="o">.</span><span class="na">glEnableVertexAttribArray</span><span class="o">(</span><span class="mi">0</span><span class="o">);</span>
<span class="no">GL30</span><span class="o">.</span><span class="na">glEnableVertexAttribArray</span><span class="o">(</span><span class="mi">1</span><span class="o">);</span>
</pre></table></code></div></div><p>To test if our buffer is now dynamic we are going to create a keybind to move the position of our top left quad upwards. First we will create an instance variable called <code class="language-plaintext highlighter-rouge">aKey</code> and then update it within the <code class="language-plaintext highlighter-rouge">glfwSetKeyCallback</code>:</p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="kd">private</span> <span class="kt">boolean</span> <span class="n">aKey</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span>
</pre></table></code></div></div><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
</pre><td class="rouge-code"><pre><span class="n">glfwSetKeyCallback</span><span class="o">(</span><span class="n">window</span><span class="o">,</span> <span class="o">(</span><span class="n">window</span><span class="o">,</span> <span class="n">key</span><span class="o">,</span> <span class="n">scancode</span><span class="o">,</span> <span class="n">action</span><span class="o">,</span> <span class="n">mods</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="o">{</span>
  <span class="k">if</span> <span class="o">(</span> <span class="n">key</span> <span class="o">==</span> <span class="no">GLFW_KEY_ESCAPE</span> <span class="o">&amp;&amp;</span> <span class="n">action</span> <span class="o">==</span> <span class="no">GLFW_RELEASE</span> <span class="o">)</span> <span class="o">{</span>
    <span class="n">glfwSetWindowShouldClose</span><span class="o">(</span><span class="n">window</span><span class="o">,</span> <span class="kc">true</span><span class="o">);</span> <span class="c1">// We will detect this in the rendering loop</span>
  <span class="o">}</span>

  <span class="k">if</span> <span class="o">(</span> <span class="n">key</span> <span class="o">==</span> <span class="no">GLFW_KEY_A</span> <span class="o">&amp;&amp;</span> <span class="n">action</span> <span class="o">==</span> <span class="no">GLFW_PRESS</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">aKey</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span>
  <span class="o">}</span>
  <span class="k">if</span> <span class="o">(</span> <span class="n">key</span> <span class="o">==</span> <span class="no">GLFW_KEY_A</span> <span class="o">&amp;&amp;</span> <span class="n">action</span> <span class="o">==</span> <span class="no">GLFW_RELEASE</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">aKey</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span>
  <span class="o">}</span>
<span class="o">});</span>
</pre></table></code></div></div><p>Now we can poll for this key press within our main rendering loop and update the top left quad’s position using a function called <code class="language-plaintext highlighter-rouge">glBufferSubData</code>. This function is commonly used with dynamic VBOs as it simply replaces the data in the buffer instead of recreating the buffer entirely like <code class="language-plaintext highlighter-rouge">glBufferData</code> would. (Note the indices in our vertices <code class="language-plaintext highlighter-rouge">ArrayList</code> for this quad’s y values are 1, 6, 11 and 16):</p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
</pre><td class="rouge-code"><pre><span class="k">while</span> <span class="o">(</span> <span class="o">!</span><span class="n">glfwWindowShouldClose</span><span class="o">(</span><span class="n">window</span><span class="o">)</span> <span class="o">)</span> <span class="o">{</span>
  <span class="n">glClear</span><span class="o">(</span><span class="no">GL_COLOR_BUFFER_BIT</span> <span class="o">|</span> <span class="no">GL_DEPTH_BUFFER_BIT</span><span class="o">);</span> <span class="c1">// clear the framebuffer</span>

  <span class="c1">// If A Key is held down</span>
  <span class="k">if</span><span class="o">(</span><span class="n">aKey</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">vboBuffer</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="n">vboBuffer</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="mi">1</span><span class="o">)</span> <span class="o">+</span> <span class="mf">0.02f</span><span class="o">);</span>
    <span class="n">vboBuffer</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="mi">6</span><span class="o">,</span> <span class="n">vboBuffer</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="mi">6</span><span class="o">)</span> <span class="o">+</span> <span class="mf">0.02f</span><span class="o">);</span>
    <span class="n">vboBuffer</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="mi">11</span><span class="o">,</span> <span class="n">vboBuffer</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="mi">11</span><span class="o">)</span> <span class="o">+</span> <span class="mf">0.02f</span><span class="o">);</span>
    <span class="n">vboBuffer</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="mi">16</span><span class="o">,</span> <span class="n">vboBuffer</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="mi">16</span><span class="o">)</span> <span class="o">+</span> <span class="mf">0.02f</span><span class="o">);</span>
  <span class="o">}</span>

  <span class="no">GL30</span><span class="o">.</span><span class="na">glBufferSubData</span><span class="o">(</span><span class="no">GL30</span><span class="o">.</span><span class="na">GL_ARRAY_BUFFER</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="n">vboBuffer</span><span class="o">);</span>

  <span class="no">GL30</span><span class="o">.</span><span class="na">glDrawElements</span><span class="o">(</span><span class="no">GL30</span><span class="o">.</span><span class="na">GL_TRIANGLES</span><span class="o">,</span> <span class="n">indices</span><span class="o">.</span><span class="na">length</span><span class="o">,</span> <span class="no">GL_UNSIGNED_INT</span><span class="o">,</span> <span class="mi">0</span><span class="o">);</span> <span class="c1">//Draw our squares</span>

  <span class="n">glfwSwapBuffers</span><span class="o">(</span><span class="n">window</span><span class="o">);</span> <span class="c1">// swap the color buffers</span>
  <span class="c1">// Poll for window events. The key callback above will only be</span>
  <span class="c1">// invoked during this call.</span>
  <span class="n">glfwPollEvents</span><span class="o">();</span>
<span class="o">}</span>
</pre></table></code></div></div><p>That should be it, we can now go ahead and run our program and hold down the A key. If everything has worked correctly the quad should slide off the screen as we update its position every frame:</p><p><img data-src="/assets/img/post/OpenGLBatchRendering/OpenGL_Tutorial_Batch_Rendering_4.gif" alt="/assets/img/post/OpenGLBatchRendering/OpenGL_Tutorial_Batch_Rendering_4.gif" data-proofer-ignore></p><p>Finally we can try adding a fifth quad using a timer to demonstrate increasing the size of our dynamic buffer on the fly. First let’s define our quad in a separate float array outside of our main render loop:</p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre><span class="kt">float</span><span class="o">[]</span> <span class="n">quad5</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">float</span><span class="o">[]</span> <span class="o">{</span>
  <span class="c1">// Quad 5 - Middle (Orange)</span>
  <span class="o">-</span><span class="mf">0.25f</span><span class="o">,</span>  <span class="mf">0.25f</span><span class="o">,</span> <span class="mf">1.0f</span><span class="o">,</span> <span class="mf">0.65f</span><span class="o">,</span> <span class="mf">0.0f</span><span class="o">,</span>
  <span class="o">-</span><span class="mf">0.25f</span><span class="o">,</span> <span class="o">-</span><span class="mf">0.25f</span><span class="o">,</span> <span class="mf">1.0f</span><span class="o">,</span> <span class="mf">0.65f</span><span class="o">,</span> <span class="mf">0.0f</span><span class="o">,</span>
   <span class="mf">0.25f</span><span class="o">,</span> <span class="o">-</span><span class="mf">0.25f</span><span class="o">,</span> <span class="mf">1.0f</span><span class="o">,</span> <span class="mf">0.65f</span><span class="o">,</span> <span class="mf">0.0f</span><span class="o">,</span>
   <span class="mf">0.25f</span><span class="o">,</span>  <span class="mf">0.25f</span><span class="o">,</span> <span class="mf">1.0f</span><span class="o">,</span> <span class="mf">0.65f</span><span class="o">,</span> <span class="mf">0.0f</span>
  <span class="o">};</span>
</pre></table></code></div></div><p>We are also going to need to add some indices for this quad to our original indices array:</p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
</pre><td class="rouge-code"><pre><span class="c1">// Indices</span>
<span class="kt">int</span><span class="o">[]</span> <span class="n">indices</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">int</span><span class="o">[]</span> <span class="o">{</span>
  <span class="c1">// Quad 1</span>
  <span class="mi">0</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span>
  <span class="mi">2</span><span class="o">,</span> <span class="mi">3</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span>

  <span class="c1">// Quad 2</span>
  <span class="mi">4</span><span class="o">,</span> <span class="mi">5</span><span class="o">,</span> <span class="mi">6</span><span class="o">,</span>
  <span class="mi">6</span><span class="o">,</span> <span class="mi">7</span><span class="o">,</span> <span class="mi">4</span><span class="o">,</span>

  <span class="c1">// Quad 3</span>
  <span class="mi">8</span><span class="o">,</span> <span class="mi">9</span><span class="o">,</span> <span class="mi">10</span><span class="o">,</span>
  <span class="mi">10</span><span class="o">,</span> <span class="mi">11</span><span class="o">,</span> <span class="mi">8</span><span class="o">,</span>

  <span class="c1">// Quad 4</span>
  <span class="mi">12</span><span class="o">,</span> <span class="mi">13</span><span class="o">,</span> <span class="mi">14</span><span class="o">,</span>
  <span class="mi">14</span><span class="o">,</span> <span class="mi">15</span><span class="o">,</span> <span class="mi">12</span><span class="o">,</span>

  <span class="c1">// Quad 5</span>
  <span class="mi">16</span><span class="o">,</span> <span class="mi">17</span><span class="o">,</span> <span class="mi">18</span><span class="o">,</span>
  <span class="mi">18</span><span class="o">,</span> <span class="mi">19</span><span class="o">,</span> <span class="mi">16</span>
<span class="o">};</span>
</pre></table></code></div></div><p>One final change we need to make before writing the code that displays the quad is increasing the allocated memory of our VBO on the GPU and our <code class="language-plaintext highlighter-rouge">FloatBuffer</code>:</p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
</pre><td class="rouge-code"><pre><span class="c1">// VBO (Vertex Buffer Object)</span>
<span class="nc">FloatBuffer</span> <span class="n">vboBuffer</span> <span class="o">=</span> <span class="nc">BufferUtils</span><span class="o">.</span><span class="na">createFloatBuffer</span><span class="o">(</span><span class="n">vertices</span><span class="o">.</span><span class="na">length</span> <span class="o">+</span> <span class="n">quad5</span><span class="o">.</span><span class="na">length</span><span class="o">);</span>
<span class="k">for</span><span class="o">(</span><span class="kt">float</span> <span class="n">vertex</span> <span class="o">:</span> <span class="n">vertices</span><span class="o">)</span> <span class="o">{</span>
  <span class="n">vboBuffer</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">vertex</span><span class="o">);</span>
<span class="o">}</span>
<span class="n">vboBuffer</span><span class="o">.</span><span class="na">flip</span><span class="o">();</span>

<span class="c1">// Pass data to GPU</span>
<span class="kt">int</span> <span class="n">positionElementCount</span> <span class="o">=</span> <span class="mi">2</span><span class="o">;</span>
<span class="kt">int</span> <span class="n">colorElementCount</span> <span class="o">=</span> <span class="mi">3</span><span class="o">;</span>
<span class="kt">int</span> <span class="n">stride</span> <span class="o">=</span> <span class="o">(</span><span class="n">positionElementCount</span> <span class="o">*</span> <span class="nc">Float</span><span class="o">.</span><span class="na">BYTES</span><span class="o">)</span> <span class="o">+</span> <span class="o">(</span><span class="n">colorElementCount</span> <span class="o">*</span> <span class="nc">Float</span><span class="o">.</span><span class="na">BYTES</span><span class="o">);</span>
<span class="kt">int</span> <span class="n">vboID</span> <span class="o">=</span> <span class="no">GL30</span><span class="o">.</span><span class="na">glGenBuffers</span><span class="o">();</span>
<span class="no">GL30</span><span class="o">.</span><span class="na">glBindBuffer</span><span class="o">(</span><span class="no">GL30</span><span class="o">.</span><span class="na">GL_ARRAY_BUFFER</span><span class="o">,</span> <span class="n">vboID</span><span class="o">);</span>
<span class="no">GL30</span><span class="o">.</span><span class="na">glBufferData</span><span class="o">(</span><span class="no">GL30</span><span class="o">.</span><span class="na">GL_ARRAY_BUFFER</span><span class="o">,</span> <span class="o">(</span><span class="n">vboBuffer</span><span class="o">.</span><span class="na">capacity</span><span class="o">()</span> <span class="o">*</span> <span class="nc">Float</span><span class="o">.</span><span class="na">BYTES</span><span class="o">)</span> <span class="o">+</span> <span class="o">(</span><span class="n">quad5</span><span class="o">.</span><span class="na">length</span> <span class="o">*</span> <span class="nc">Float</span><span class="o">.</span><span class="na">BYTES</span><span class="o">),</span> <span class="no">GL30</span><span class="o">.</span><span class="na">GL_DYNAMIC_DRAW</span><span class="o">);</span>
<span class="no">GL30</span><span class="o">.</span><span class="na">glVertexAttribPointer</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="n">positionElementCount</span><span class="o">,</span> <span class="no">GL_FLOAT</span><span class="o">,</span> <span class="kc">false</span><span class="o">,</span> <span class="n">stride</span><span class="o">,</span> <span class="mi">0</span><span class="o">);</span>
<span class="no">GL30</span><span class="o">.</span><span class="na">glVertexAttribPointer</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="n">colorElementCount</span><span class="o">,</span> <span class="no">GL_FLOAT</span><span class="o">,</span> <span class="kc">false</span><span class="o">,</span> <span class="n">stride</span><span class="o">,</span> <span class="n">positionElementCount</span> <span class="o">*</span> <span class="nc">Float</span><span class="o">.</span><span class="na">BYTES</span><span class="o">);</span>
<span class="no">GL30</span><span class="o">.</span><span class="na">glEnableVertexAttribArray</span><span class="o">(</span><span class="mi">0</span><span class="o">);</span>
<span class="no">GL30</span><span class="o">.</span><span class="na">glEnableVertexAttribArray</span><span class="o">(</span><span class="mi">1</span><span class="o">);</span>
</pre></table></code></div></div><p>Here you can see I simply made use of <code class="language-plaintext highlighter-rouge">quad5.length</code> when creating the <code class="language-plaintext highlighter-rouge">FloatBuffer</code> as well as when creating the <code class="language-plaintext highlighter-rouge">GL_ARRAY_BUFFER</code>. Now we can finally add some code to our main render loop to add the square:</p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
</pre><td class="rouge-code"><pre><span class="kt">int</span> <span class="n">timer</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
<span class="c1">// Run the rendering loop until the user has attempted to close</span>
<span class="c1">// the window or has pressed the ESCAPE key.</span>
<span class="k">while</span> <span class="o">(</span> <span class="o">!</span><span class="n">glfwWindowShouldClose</span><span class="o">(</span><span class="n">window</span><span class="o">)</span> <span class="o">)</span> <span class="o">{</span>
  <span class="n">glClear</span><span class="o">(</span><span class="no">GL_COLOR_BUFFER_BIT</span> <span class="o">|</span> <span class="no">GL_DEPTH_BUFFER_BIT</span><span class="o">);</span> <span class="c1">// clear the framebuffer</span>

  <span class="c1">// If A Key is held down</span>
  <span class="k">if</span><span class="o">(</span><span class="n">aKey</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">vboBuffer</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="n">vboBuffer</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="mi">1</span><span class="o">)</span> <span class="o">+</span> <span class="mf">0.02f</span><span class="o">);</span>
    <span class="n">vboBuffer</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="mi">6</span><span class="o">,</span> <span class="n">vboBuffer</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="mi">6</span><span class="o">)</span> <span class="o">+</span> <span class="mf">0.02f</span><span class="o">);</span>
    <span class="n">vboBuffer</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="mi">11</span><span class="o">,</span> <span class="n">vboBuffer</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="mi">11</span><span class="o">)</span> <span class="o">+</span> <span class="mf">0.02f</span><span class="o">);</span>
    <span class="n">vboBuffer</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="mi">16</span><span class="o">,</span> <span class="n">vboBuffer</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="mi">16</span><span class="o">)</span> <span class="o">+</span> <span class="mf">0.02f</span><span class="o">);</span>
  <span class="o">}</span>

  <span class="n">timer</span><span class="o">++;</span>
  <span class="c1">// After 200 frames</span>
  <span class="k">if</span><span class="o">(</span><span class="n">timer</span> <span class="o">==</span> <span class="mi">200</span><span class="o">)</span> <span class="o">{</span>
    <span class="c1">// Regenerate our vboBuffer with the new quad</span>
    <span class="n">vboBuffer</span><span class="o">.</span><span class="na">clear</span><span class="o">();</span>
    <span class="k">for</span><span class="o">(</span><span class="kt">float</span> <span class="n">vertex</span> <span class="o">:</span> <span class="n">vertices</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">vboBuffer</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">vertex</span><span class="o">);</span>
    <span class="o">}</span>
    <span class="k">for</span><span class="o">(</span><span class="kt">float</span> <span class="n">vertex</span> <span class="o">:</span> <span class="n">quad5</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">vboBuffer</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">vertex</span><span class="o">);</span>
    <span class="o">}</span>
    <span class="n">vboBuffer</span><span class="o">.</span><span class="na">flip</span><span class="o">();</span>
  <span class="o">}</span>

  <span class="no">GL30</span><span class="o">.</span><span class="na">glBufferSubData</span><span class="o">(</span><span class="no">GL30</span><span class="o">.</span><span class="na">GL_ARRAY_BUFFER</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="n">vboBuffer</span><span class="o">);</span>

  <span class="no">GL30</span><span class="o">.</span><span class="na">glDrawElements</span><span class="o">(</span><span class="no">GL30</span><span class="o">.</span><span class="na">GL_TRIANGLES</span><span class="o">,</span> <span class="n">indices</span><span class="o">.</span><span class="na">length</span><span class="o">,</span> <span class="no">GL_UNSIGNED_INT</span><span class="o">,</span> <span class="mi">0</span><span class="o">);</span> <span class="c1">//Draw our squares</span>

  <span class="n">glfwSwapBuffers</span><span class="o">(</span><span class="n">window</span><span class="o">);</span> <span class="c1">// swap the color buffers</span>
  <span class="c1">// Poll for window events. The key callback above will only be</span>
  <span class="c1">// invoked during this call.</span>
  <span class="n">glfwPollEvents</span><span class="o">();</span>
<span class="o">}</span>
</pre></table></code></div></div><p>Here I use a timer to add the quad after 200 frames. Due to the way Java’s Buffers work we end up having to recreate our <code class="language-plaintext highlighter-rouge">vboBuffer</code> after the timer has completed, adding the new quad to it. If all is working correctly the quad will appear shortly after running the program:</p><p><img data-src="/assets/img/post/OpenGLBatchRendering/OpenGL_Tutorial_Batch_Rendering_5.gif" alt="/assets/img/post/OpenGLBatchRendering/OpenGL_Tutorial_Batch_Rendering_5.gif" data-proofer-ignore></p><p>From all of this it might be apparent that for larger projects it would be best to abstract the idea of a quad and vertex into their own classes and generate the <code class="language-plaintext highlighter-rouge">vboBuffer</code> using these to make it much easier to create a quad and add it to the screen. But for now this way of doing things works for showing off the general concept of Batch Rendering and using Dynamic VBOs. Here is the entirety of the source code so far:</p><p><strong>Application.java</strong></p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
252
253
254
255
256
257
258
259
260
261
262
263
264
265
266
267
268
269
270
271
272
273
274
275
276
277
278
279
280
281
282
</pre><td class="rouge-code"><pre><span class="kn">import</span> <span class="nn">org.lwjgl.*</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.lwjgl.glfw.*</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.lwjgl.opengl.*</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.lwjgl.system.*</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.io.BufferedReader</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.InputStreamReader</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.nio.*</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.ArrayList</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.Collections</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">static</span> <span class="n">org</span><span class="o">.</span><span class="na">lwjgl</span><span class="o">.</span><span class="na">glfw</span><span class="o">.</span><span class="na">Callbacks</span><span class="o">.*;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">org</span><span class="o">.</span><span class="na">lwjgl</span><span class="o">.</span><span class="na">glfw</span><span class="o">.</span><span class="na">GLFW</span><span class="o">.*;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">org</span><span class="o">.</span><span class="na">lwjgl</span><span class="o">.</span><span class="na">opengl</span><span class="o">.</span><span class="na">GL11</span><span class="o">.*;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">org</span><span class="o">.</span><span class="na">lwjgl</span><span class="o">.</span><span class="na">system</span><span class="o">.</span><span class="na">MemoryStack</span><span class="o">.*;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">org</span><span class="o">.</span><span class="na">lwjgl</span><span class="o">.</span><span class="na">system</span><span class="o">.</span><span class="na">MemoryUtil</span><span class="o">.*;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Application</span> <span class="o">{</span>

  <span class="c1">// The window handle</span>
  <span class="kd">private</span> <span class="kt">long</span> <span class="n">window</span><span class="o">;</span>
  <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kt">int</span> <span class="no">WINDOW_WIDTH</span> <span class="o">=</span> <span class="mi">960</span> <span class="o">/</span> <span class="mi">2</span><span class="o">;</span>
  <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kt">int</span> <span class="no">WINDOW_HEIGHT</span> <span class="o">=</span> <span class="mi">960</span> <span class="o">/</span> <span class="mi">2</span><span class="o">;</span>

  <span class="kd">private</span> <span class="kt">boolean</span> <span class="n">aKey</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span>

  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">()</span> <span class="o">{</span>

    <span class="n">init</span><span class="o">();</span>
    <span class="n">loop</span><span class="o">();</span>

    <span class="c1">// Free the window callbacks and destroy the window</span>
    <span class="n">glfwFreeCallbacks</span><span class="o">(</span><span class="n">window</span><span class="o">);</span>
    <span class="n">glfwDestroyWindow</span><span class="o">(</span><span class="n">window</span><span class="o">);</span>

    <span class="c1">// Terminate GLFW and free the error callback</span>
    <span class="n">glfwTerminate</span><span class="o">();</span>
    <span class="n">glfwSetErrorCallback</span><span class="o">(</span><span class="kc">null</span><span class="o">).</span><span class="na">free</span><span class="o">();</span>
  <span class="o">}</span>

  <span class="kd">private</span> <span class="kt">void</span> <span class="nf">init</span><span class="o">()</span> <span class="o">{</span>
    <span class="c1">// Setup an error callback. The default implementation</span>
    <span class="c1">// will print the error message in System.err.</span>
    <span class="nc">GLFWErrorCallback</span><span class="o">.</span><span class="na">createPrint</span><span class="o">(</span><span class="nc">System</span><span class="o">.</span><span class="na">err</span><span class="o">).</span><span class="na">set</span><span class="o">();</span>

    <span class="c1">// Initialize GLFW. Most GLFW functions will not work before doing this.</span>
    <span class="k">if</span> <span class="o">(</span> <span class="o">!</span><span class="n">glfwInit</span><span class="o">()</span> <span class="o">)</span>
      <span class="k">throw</span> <span class="k">new</span> <span class="nf">IllegalStateException</span><span class="o">(</span><span class="s">"Unable to initialize GLFW"</span><span class="o">);</span>

    <span class="c1">// Configure GLFW</span>
    <span class="n">glfwDefaultWindowHints</span><span class="o">();</span> <span class="c1">// optional, the current window hints are already the default</span>
    <span class="n">glfwWindowHint</span><span class="o">(</span><span class="no">GLFW_VISIBLE</span><span class="o">,</span> <span class="no">GLFW_FALSE</span><span class="o">);</span> <span class="c1">// the window will stay hidden after creation</span>
    <span class="n">glfwWindowHint</span><span class="o">(</span><span class="no">GLFW_RESIZABLE</span><span class="o">,</span> <span class="no">GLFW_TRUE</span><span class="o">);</span> <span class="c1">// the window will be resizable</span>

    <span class="c1">// Create the window</span>
    <span class="n">window</span> <span class="o">=</span> <span class="n">glfwCreateWindow</span><span class="o">(</span><span class="no">WINDOW_WIDTH</span><span class="o">,</span> <span class="no">WINDOW_HEIGHT</span><span class="o">,</span> <span class="s">"Batch Rendering Tutorial"</span><span class="o">,</span> <span class="no">NULL</span><span class="o">,</span> <span class="no">NULL</span><span class="o">);</span>
    <span class="k">if</span> <span class="o">(</span> <span class="n">window</span> <span class="o">==</span> <span class="no">NULL</span> <span class="o">)</span>
      <span class="k">throw</span> <span class="k">new</span> <span class="nf">RuntimeException</span><span class="o">(</span><span class="s">"Failed to create the GLFW window"</span><span class="o">);</span>

    <span class="c1">// Setup a key callback. It will be called every time a key is pressed, repeated or released.</span>
    <span class="n">glfwSetKeyCallback</span><span class="o">(</span><span class="n">window</span><span class="o">,</span> <span class="o">(</span><span class="n">window</span><span class="o">,</span> <span class="n">key</span><span class="o">,</span> <span class="n">scancode</span><span class="o">,</span> <span class="n">action</span><span class="o">,</span> <span class="n">mods</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="o">{</span>
      <span class="k">if</span> <span class="o">(</span> <span class="n">key</span> <span class="o">==</span> <span class="no">GLFW_KEY_ESCAPE</span> <span class="o">&amp;&amp;</span> <span class="n">action</span> <span class="o">==</span> <span class="no">GLFW_RELEASE</span> <span class="o">)</span> <span class="o">{</span>
        <span class="n">glfwSetWindowShouldClose</span><span class="o">(</span><span class="n">window</span><span class="o">,</span> <span class="kc">true</span><span class="o">);</span> <span class="c1">// We will detect this in the rendering loop</span>
      <span class="o">}</span>

      <span class="k">if</span> <span class="o">(</span> <span class="n">key</span> <span class="o">==</span> <span class="no">GLFW_KEY_A</span> <span class="o">&amp;&amp;</span> <span class="n">action</span> <span class="o">==</span> <span class="no">GLFW_PRESS</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">aKey</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span>
      <span class="o">}</span>
      <span class="k">if</span> <span class="o">(</span> <span class="n">key</span> <span class="o">==</span> <span class="no">GLFW_KEY_A</span> <span class="o">&amp;&amp;</span> <span class="n">action</span> <span class="o">==</span> <span class="no">GLFW_RELEASE</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">aKey</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span>
      <span class="o">}</span>
    <span class="o">});</span>

    <span class="c1">// Get the thread stack and push a new frame</span>
    <span class="k">try</span> <span class="o">(</span> <span class="nc">MemoryStack</span> <span class="n">stack</span> <span class="o">=</span> <span class="n">stackPush</span><span class="o">()</span> <span class="o">)</span> <span class="o">{</span>
      <span class="nc">IntBuffer</span> <span class="n">pWidth</span> <span class="o">=</span> <span class="n">stack</span><span class="o">.</span><span class="na">mallocInt</span><span class="o">(</span><span class="mi">1</span><span class="o">);</span> <span class="c1">// int*</span>
      <span class="nc">IntBuffer</span> <span class="n">pHeight</span> <span class="o">=</span> <span class="n">stack</span><span class="o">.</span><span class="na">mallocInt</span><span class="o">(</span><span class="mi">1</span><span class="o">);</span> <span class="c1">// int*</span>

      <span class="c1">// Get the window size passed to glfwCreateWindow</span>
      <span class="n">glfwGetWindowSize</span><span class="o">(</span><span class="n">window</span><span class="o">,</span> <span class="n">pWidth</span><span class="o">,</span> <span class="n">pHeight</span><span class="o">);</span>

      <span class="c1">// Get the resolution of the primary monitor</span>
      <span class="nc">GLFWVidMode</span> <span class="n">vidmode</span> <span class="o">=</span> <span class="n">glfwGetVideoMode</span><span class="o">(</span><span class="n">glfwGetPrimaryMonitor</span><span class="o">());</span>

      <span class="c1">// Center the window</span>
      <span class="n">glfwSetWindowPos</span><span class="o">(</span>
        <span class="n">window</span><span class="o">,</span>
        <span class="o">(</span><span class="n">vidmode</span><span class="o">.</span><span class="na">width</span><span class="o">()</span> <span class="o">-</span> <span class="n">pWidth</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="mi">0</span><span class="o">))</span> <span class="o">/</span> <span class="mi">2</span><span class="o">,</span>
        <span class="o">(</span><span class="n">vidmode</span><span class="o">.</span><span class="na">height</span><span class="o">()</span> <span class="o">-</span> <span class="n">pHeight</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="mi">0</span><span class="o">))</span> <span class="o">/</span> <span class="mi">2</span>
      <span class="o">);</span>
    <span class="o">}</span> <span class="c1">// the stack frame is popped automatically</span>

    <span class="c1">// Make the OpenGL context current</span>
    <span class="n">glfwMakeContextCurrent</span><span class="o">(</span><span class="n">window</span><span class="o">);</span>
    <span class="c1">// Enable v-sync</span>
    <span class="n">glfwSwapInterval</span><span class="o">(</span><span class="mi">1</span><span class="o">);</span>

    <span class="c1">// Make the window visible</span>
    <span class="n">glfwShowWindow</span><span class="o">(</span><span class="n">window</span><span class="o">);</span>
  <span class="o">}</span>

  <span class="kd">private</span> <span class="kt">void</span> <span class="nf">loop</span><span class="o">()</span> <span class="o">{</span>
    <span class="c1">// This line is critical for LWJGL's interoperation with GLFW's</span>
    <span class="c1">// OpenGL context, or any context that is managed externally.</span>
    <span class="c1">// LWJGL detects the context that is current in the current thread,</span>
    <span class="c1">// creates the GLCapabilities instance and makes the OpenGL</span>
    <span class="c1">// bindings available for use.</span>
    <span class="no">GL</span><span class="o">.</span><span class="na">createCapabilities</span><span class="o">();</span>

    <span class="c1">// Set the clear color</span>
    <span class="n">glClearColor</span><span class="o">(</span><span class="mf">1.0f</span><span class="o">,</span> <span class="mf">0.0f</span><span class="o">,</span> <span class="mf">0.0f</span><span class="o">,</span> <span class="mf">0.0f</span><span class="o">);</span>

    <span class="kt">float</span><span class="o">[]</span> <span class="n">vertices</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">float</span><span class="o">[]</span> <span class="o">{</span>
      <span class="c1">// Quad 1 - Top Left (Black)</span>
      <span class="o">-</span><span class="mf">0.75f</span><span class="o">,</span>  <span class="mf">0.75f</span><span class="o">,</span> <span class="mf">1.0f</span><span class="o">,</span> <span class="mf">1.0f</span><span class="o">,</span> <span class="mf">1.0f</span><span class="o">,</span>
      <span class="o">-</span><span class="mf">0.75f</span><span class="o">,</span>  <span class="mf">0.25f</span><span class="o">,</span> <span class="mf">1.0f</span><span class="o">,</span> <span class="mf">1.0f</span><span class="o">,</span> <span class="mf">1.0f</span><span class="o">,</span>
      <span class="o">-</span><span class="mf">0.25f</span><span class="o">,</span>  <span class="mf">0.25f</span><span class="o">,</span> <span class="mf">1.0f</span><span class="o">,</span> <span class="mf">1.0f</span><span class="o">,</span> <span class="mf">1.0f</span><span class="o">,</span>
      <span class="o">-</span><span class="mf">0.25f</span><span class="o">,</span>  <span class="mf">0.75f</span><span class="o">,</span> <span class="mf">1.0f</span><span class="o">,</span> <span class="mf">1.0f</span><span class="o">,</span> <span class="mf">1.0f</span><span class="o">,</span>

      <span class="c1">// Quad 2 - Bottom Left (White)</span>
      <span class="o">-</span><span class="mf">0.75f</span><span class="o">,</span> <span class="o">-</span><span class="mf">0.25f</span><span class="o">,</span> <span class="mf">0.0f</span><span class="o">,</span> <span class="mf">0.0f</span><span class="o">,</span> <span class="mf">0.0f</span><span class="o">,</span>
      <span class="o">-</span><span class="mf">0.75f</span><span class="o">,</span> <span class="o">-</span><span class="mf">0.75f</span><span class="o">,</span> <span class="mf">0.0f</span><span class="o">,</span> <span class="mf">0.0f</span><span class="o">,</span> <span class="mf">0.0f</span><span class="o">,</span>
      <span class="o">-</span><span class="mf">0.25f</span><span class="o">,</span> <span class="o">-</span><span class="mf">0.75f</span><span class="o">,</span> <span class="mf">0.0f</span><span class="o">,</span> <span class="mf">0.0f</span><span class="o">,</span> <span class="mf">0.0f</span><span class="o">,</span>
      <span class="o">-</span><span class="mf">0.25f</span><span class="o">,</span> <span class="o">-</span><span class="mf">0.25f</span><span class="o">,</span> <span class="mf">0.0f</span><span class="o">,</span> <span class="mf">0.0f</span><span class="o">,</span> <span class="mf">0.0f</span><span class="o">,</span>

       <span class="c1">// Quad 3 - Bottom Right (Green)</span>
       <span class="mf">0.25f</span><span class="o">,</span> <span class="o">-</span><span class="mf">0.25f</span><span class="o">,</span> <span class="mf">0.0f</span><span class="o">,</span> <span class="mf">1.0f</span><span class="o">,</span> <span class="mf">0.0f</span><span class="o">,</span>
       <span class="mf">0.25f</span><span class="o">,</span> <span class="o">-</span><span class="mf">0.75f</span><span class="o">,</span> <span class="mf">0.0f</span><span class="o">,</span> <span class="mf">1.0f</span><span class="o">,</span> <span class="mf">0.0f</span><span class="o">,</span>
       <span class="mf">0.75f</span><span class="o">,</span> <span class="o">-</span><span class="mf">0.75f</span><span class="o">,</span> <span class="mf">0.0f</span><span class="o">,</span> <span class="mf">1.0f</span><span class="o">,</span> <span class="mf">0.0f</span><span class="o">,</span>
       <span class="mf">0.75f</span><span class="o">,</span> <span class="o">-</span><span class="mf">0.25f</span><span class="o">,</span> <span class="mf">0.0f</span><span class="o">,</span> <span class="mf">1.0f</span><span class="o">,</span> <span class="mf">0.0f</span><span class="o">,</span>

       <span class="c1">// Quad 4 - Top Right (Blue)</span>
       <span class="mf">0.25f</span><span class="o">,</span> <span class="mf">0.75f</span><span class="o">,</span> <span class="mf">0.0f</span><span class="o">,</span> <span class="mf">0.0f</span><span class="o">,</span> <span class="mf">1.0f</span><span class="o">,</span>
       <span class="mf">0.25f</span><span class="o">,</span> <span class="mf">0.25f</span><span class="o">,</span> <span class="mf">0.0f</span><span class="o">,</span> <span class="mf">0.0f</span><span class="o">,</span> <span class="mf">1.0f</span><span class="o">,</span>
       <span class="mf">0.75f</span><span class="o">,</span> <span class="mf">0.25f</span><span class="o">,</span> <span class="mf">0.0f</span><span class="o">,</span> <span class="mf">0.0f</span><span class="o">,</span> <span class="mf">1.0f</span><span class="o">,</span>
       <span class="mf">0.75f</span><span class="o">,</span> <span class="mf">0.75f</span><span class="o">,</span> <span class="mf">0.0f</span><span class="o">,</span> <span class="mf">0.0f</span><span class="o">,</span> <span class="mf">1.0f</span>
    <span class="o">};</span>

    <span class="kt">float</span><span class="o">[]</span> <span class="n">quad5</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">float</span><span class="o">[]</span> <span class="o">{</span>
       <span class="c1">// Quad 5 - Middle (Orange)</span>
       <span class="o">-</span><span class="mf">0.25f</span><span class="o">,</span>  <span class="mf">0.25f</span><span class="o">,</span> <span class="mf">1.0f</span><span class="o">,</span> <span class="mf">0.65f</span><span class="o">,</span> <span class="mf">0.0f</span><span class="o">,</span>
       <span class="o">-</span><span class="mf">0.25f</span><span class="o">,</span> <span class="o">-</span><span class="mf">0.25f</span><span class="o">,</span> <span class="mf">1.0f</span><span class="o">,</span> <span class="mf">0.65f</span><span class="o">,</span> <span class="mf">0.0f</span><span class="o">,</span>
        <span class="mf">0.25f</span><span class="o">,</span> <span class="o">-</span><span class="mf">0.25f</span><span class="o">,</span> <span class="mf">1.0f</span><span class="o">,</span> <span class="mf">0.65f</span><span class="o">,</span> <span class="mf">0.0f</span><span class="o">,</span>
        <span class="mf">0.25f</span><span class="o">,</span>  <span class="mf">0.25f</span><span class="o">,</span> <span class="mf">1.0f</span><span class="o">,</span> <span class="mf">0.65f</span><span class="o">,</span> <span class="mf">0.0f</span>
    <span class="o">};</span>

    <span class="c1">// VBO (Vertex Buffer Object)</span>
    <span class="nc">FloatBuffer</span> <span class="n">vboBuffer</span> <span class="o">=</span> <span class="nc">BufferUtils</span><span class="o">.</span><span class="na">createFloatBuffer</span><span class="o">(</span><span class="n">vertices</span><span class="o">.</span><span class="na">length</span> <span class="o">+</span> <span class="n">quad5</span><span class="o">.</span><span class="na">length</span><span class="o">);</span>
    <span class="k">for</span><span class="o">(</span><span class="kt">float</span> <span class="n">vertex</span> <span class="o">:</span> <span class="n">vertices</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">vboBuffer</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">vertex</span><span class="o">);</span>
    <span class="o">}</span>
    <span class="n">vboBuffer</span><span class="o">.</span><span class="na">flip</span><span class="o">();</span>

    <span class="c1">// Pass data to GPU</span>
    <span class="kt">int</span> <span class="n">positionElementCount</span> <span class="o">=</span> <span class="mi">2</span><span class="o">;</span>
    <span class="kt">int</span> <span class="n">colorElementCount</span> <span class="o">=</span> <span class="mi">3</span><span class="o">;</span>
    <span class="kt">int</span> <span class="n">stride</span> <span class="o">=</span> <span class="o">(</span><span class="n">positionElementCount</span> <span class="o">*</span> <span class="nc">Float</span><span class="o">.</span><span class="na">BYTES</span><span class="o">)</span> <span class="o">+</span> <span class="o">(</span><span class="n">colorElementCount</span> <span class="o">*</span> <span class="nc">Float</span><span class="o">.</span><span class="na">BYTES</span><span class="o">);</span>
    <span class="kt">int</span> <span class="n">vboID</span> <span class="o">=</span> <span class="no">GL30</span><span class="o">.</span><span class="na">glGenBuffers</span><span class="o">();</span>
    <span class="no">GL30</span><span class="o">.</span><span class="na">glBindBuffer</span><span class="o">(</span><span class="no">GL30</span><span class="o">.</span><span class="na">GL_ARRAY_BUFFER</span><span class="o">,</span> <span class="n">vboID</span><span class="o">);</span>
    <span class="no">GL30</span><span class="o">.</span><span class="na">glBufferData</span><span class="o">(</span><span class="no">GL30</span><span class="o">.</span><span class="na">GL_ARRAY_BUFFER</span><span class="o">,</span> <span class="o">(</span><span class="n">vboBuffer</span><span class="o">.</span><span class="na">capacity</span><span class="o">()</span> <span class="o">*</span> <span class="nc">Float</span><span class="o">.</span><span class="na">BYTES</span><span class="o">)</span> <span class="o">+</span> <span class="o">(</span><span class="n">quad5</span><span class="o">.</span><span class="na">length</span> <span class="o">*</span> <span class="nc">Float</span><span class="o">.</span><span class="na">BYTES</span><span class="o">),</span> <span class="no">GL30</span><span class="o">.</span><span class="na">GL_DYNAMIC_DRAW</span><span class="o">);</span>
    <span class="no">GL30</span><span class="o">.</span><span class="na">glVertexAttribPointer</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="n">positionElementCount</span><span class="o">,</span> <span class="no">GL_FLOAT</span><span class="o">,</span> <span class="kc">false</span><span class="o">,</span> <span class="n">stride</span><span class="o">,</span> <span class="mi">0</span><span class="o">);</span>
    <span class="no">GL30</span><span class="o">.</span><span class="na">glVertexAttribPointer</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="n">colorElementCount</span><span class="o">,</span> <span class="no">GL_FLOAT</span><span class="o">,</span> <span class="kc">false</span><span class="o">,</span> <span class="n">stride</span><span class="o">,</span> <span class="n">positionElementCount</span> <span class="o">*</span> <span class="nc">Float</span><span class="o">.</span><span class="na">BYTES</span><span class="o">);</span>
    <span class="no">GL30</span><span class="o">.</span><span class="na">glEnableVertexAttribArray</span><span class="o">(</span><span class="mi">0</span><span class="o">);</span>
    <span class="no">GL30</span><span class="o">.</span><span class="na">glEnableVertexAttribArray</span><span class="o">(</span><span class="mi">1</span><span class="o">);</span>

    <span class="c1">// Indices</span>
    <span class="kt">int</span><span class="o">[]</span> <span class="n">indices</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">int</span><span class="o">[]</span> <span class="o">{</span>
      <span class="c1">// Quad 1</span>
      <span class="mi">0</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span>
      <span class="mi">2</span><span class="o">,</span> <span class="mi">3</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span>

      <span class="c1">// Quad 2</span>
      <span class="mi">4</span><span class="o">,</span> <span class="mi">5</span><span class="o">,</span> <span class="mi">6</span><span class="o">,</span>
      <span class="mi">6</span><span class="o">,</span> <span class="mi">7</span><span class="o">,</span> <span class="mi">4</span><span class="o">,</span>

      <span class="c1">// Quad 3</span>
      <span class="mi">8</span><span class="o">,</span> <span class="mi">9</span><span class="o">,</span> <span class="mi">10</span><span class="o">,</span>
      <span class="mi">10</span><span class="o">,</span> <span class="mi">11</span><span class="o">,</span> <span class="mi">8</span><span class="o">,</span>

      <span class="c1">// Quad 4</span>
      <span class="mi">12</span><span class="o">,</span> <span class="mi">13</span><span class="o">,</span> <span class="mi">14</span><span class="o">,</span>
      <span class="mi">14</span><span class="o">,</span> <span class="mi">15</span><span class="o">,</span> <span class="mi">12</span><span class="o">,</span>

      <span class="c1">// Quad 5</span>
      <span class="mi">16</span><span class="o">,</span> <span class="mi">17</span><span class="o">,</span> <span class="mi">18</span><span class="o">,</span>
      <span class="mi">18</span><span class="o">,</span> <span class="mi">19</span><span class="o">,</span> <span class="mi">16</span>
    <span class="o">};</span>

    <span class="c1">// IBO (Index Buffer Object)</span>
    <span class="nc">IntBuffer</span> <span class="n">iboBuffer</span> <span class="o">=</span> <span class="nc">BufferUtils</span><span class="o">.</span><span class="na">createIntBuffer</span><span class="o">(</span><span class="n">indices</span><span class="o">.</span><span class="na">length</span><span class="o">);</span>
    <span class="k">for</span><span class="o">(</span><span class="kt">int</span> <span class="n">index</span> <span class="o">:</span> <span class="n">indices</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">iboBuffer</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">index</span><span class="o">);</span>
    <span class="o">}</span>
    <span class="n">iboBuffer</span><span class="o">.</span><span class="na">flip</span><span class="o">();</span>

    <span class="c1">// Pass data to GPU</span>
    <span class="kt">int</span> <span class="n">iboID</span> <span class="o">=</span> <span class="no">GL30</span><span class="o">.</span><span class="na">glGenBuffers</span><span class="o">();</span>
    <span class="no">GL30</span><span class="o">.</span><span class="na">glBindBuffer</span><span class="o">(</span><span class="no">GL30</span><span class="o">.</span><span class="na">GL_ELEMENT_ARRAY_BUFFER</span><span class="o">,</span> <span class="n">iboID</span><span class="o">);</span>
    <span class="no">GL30</span><span class="o">.</span><span class="na">glBufferData</span><span class="o">(</span><span class="no">GL30</span><span class="o">.</span><span class="na">GL_ELEMENT_ARRAY_BUFFER</span><span class="o">,</span> <span class="n">iboBuffer</span><span class="o">,</span> <span class="no">GL30</span><span class="o">.</span><span class="na">GL_STATIC_DRAW</span><span class="o">);</span>

    <span class="c1">// Shaders</span>
    <span class="kt">int</span> <span class="n">programID</span> <span class="o">=</span> <span class="no">GL30</span><span class="o">.</span><span class="na">glCreateProgram</span><span class="o">();</span>
    <span class="kt">int</span> <span class="n">vertShaderObj</span> <span class="o">=</span> <span class="no">GL30</span><span class="o">.</span><span class="na">glCreateShader</span><span class="o">(</span><span class="no">GL30</span><span class="o">.</span><span class="na">GL_VERTEX_SHADER</span><span class="o">);</span>
    <span class="kt">int</span> <span class="n">fragShaderObj</span> <span class="o">=</span> <span class="no">GL30</span><span class="o">.</span><span class="na">glCreateShader</span><span class="o">(</span><span class="no">GL30</span><span class="o">.</span><span class="na">GL_FRAGMENT_SHADER</span><span class="o">);</span>
    <span class="nc">String</span> <span class="n">vertexShader</span> <span class="o">=</span> <span class="n">parseShaderFromFile</span><span class="o">(</span><span class="s">"/shaders/vert.shader"</span><span class="o">);</span>
    <span class="no">GL30</span><span class="o">.</span><span class="na">glShaderSource</span><span class="o">(</span><span class="n">vertShaderObj</span><span class="o">,</span> <span class="n">vertexShader</span><span class="o">);</span>
    <span class="no">GL30</span><span class="o">.</span><span class="na">glCompileShader</span><span class="o">(</span><span class="n">vertShaderObj</span><span class="o">);</span>
    <span class="nc">String</span> <span class="n">fragmentShader</span> <span class="o">=</span> <span class="n">parseShaderFromFile</span><span class="o">(</span><span class="s">"/shaders/frag.shader"</span><span class="o">);</span>
    <span class="no">GL30</span><span class="o">.</span><span class="na">glShaderSource</span><span class="o">(</span><span class="n">fragShaderObj</span><span class="o">,</span> <span class="n">fragmentShader</span><span class="o">);</span>
    <span class="no">GL30</span><span class="o">.</span><span class="na">glCompileShader</span><span class="o">(</span><span class="n">fragShaderObj</span><span class="o">);</span>
    <span class="no">GL30</span><span class="o">.</span><span class="na">glAttachShader</span><span class="o">(</span><span class="n">programID</span><span class="o">,</span> <span class="n">vertShaderObj</span><span class="o">);</span>
    <span class="no">GL30</span><span class="o">.</span><span class="na">glAttachShader</span><span class="o">(</span><span class="n">programID</span><span class="o">,</span> <span class="n">fragShaderObj</span><span class="o">);</span>
    <span class="no">GL30</span><span class="o">.</span><span class="na">glLinkProgram</span><span class="o">(</span><span class="n">programID</span><span class="o">);</span>
    <span class="no">GL30</span><span class="o">.</span><span class="na">glValidateProgram</span><span class="o">(</span><span class="n">programID</span><span class="o">);</span>
    <span class="no">GL30</span><span class="o">.</span><span class="na">glUseProgram</span><span class="o">(</span><span class="n">programID</span><span class="o">);</span>


    <span class="kt">int</span> <span class="n">timer</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
    <span class="c1">// Run the rendering loop until the user has attempted to close</span>
    <span class="c1">// the window or has pressed the ESCAPE key.</span>
    <span class="k">while</span> <span class="o">(</span> <span class="o">!</span><span class="n">glfwWindowShouldClose</span><span class="o">(</span><span class="n">window</span><span class="o">)</span> <span class="o">)</span> <span class="o">{</span>
      <span class="n">glClear</span><span class="o">(</span><span class="no">GL_COLOR_BUFFER_BIT</span> <span class="o">|</span> <span class="no">GL_DEPTH_BUFFER_BIT</span><span class="o">);</span> <span class="c1">// clear the framebuffer</span>

      <span class="c1">// If A Key is held down</span>
      <span class="k">if</span><span class="o">(</span><span class="n">aKey</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">vboBuffer</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="n">vboBuffer</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="mi">1</span><span class="o">)</span> <span class="o">+</span> <span class="mf">0.02f</span><span class="o">);</span>
        <span class="n">vboBuffer</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="mi">6</span><span class="o">,</span> <span class="n">vboBuffer</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="mi">6</span><span class="o">)</span> <span class="o">+</span> <span class="mf">0.02f</span><span class="o">);</span>
        <span class="n">vboBuffer</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="mi">11</span><span class="o">,</span> <span class="n">vboBuffer</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="mi">11</span><span class="o">)</span> <span class="o">+</span> <span class="mf">0.02f</span><span class="o">);</span>
        <span class="n">vboBuffer</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="mi">16</span><span class="o">,</span> <span class="n">vboBuffer</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="mi">16</span><span class="o">)</span> <span class="o">+</span> <span class="mf">0.02f</span><span class="o">);</span>
      <span class="o">}</span>

      <span class="n">timer</span><span class="o">++;</span>
      <span class="c1">// After 200 frames</span>
      <span class="k">if</span><span class="o">(</span><span class="n">timer</span> <span class="o">==</span> <span class="mi">200</span><span class="o">)</span> <span class="o">{</span>
        <span class="c1">// Regenerate our vboBuffer with the new quad</span>
        <span class="n">vboBuffer</span><span class="o">.</span><span class="na">clear</span><span class="o">();</span>
        <span class="k">for</span><span class="o">(</span><span class="kt">float</span> <span class="n">vertex</span> <span class="o">:</span> <span class="n">vertices</span><span class="o">)</span> <span class="o">{</span>
          <span class="n">vboBuffer</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">vertex</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="k">for</span><span class="o">(</span><span class="kt">float</span> <span class="n">vertex</span> <span class="o">:</span> <span class="n">quad5</span><span class="o">)</span> <span class="o">{</span>
          <span class="n">vboBuffer</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">vertex</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="n">vboBuffer</span><span class="o">.</span><span class="na">flip</span><span class="o">();</span>
      <span class="o">}</span>

      <span class="no">GL30</span><span class="o">.</span><span class="na">glBufferSubData</span><span class="o">(</span><span class="no">GL30</span><span class="o">.</span><span class="na">GL_ARRAY_BUFFER</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="n">vboBuffer</span><span class="o">);</span>

      <span class="no">GL30</span><span class="o">.</span><span class="na">glDrawElements</span><span class="o">(</span><span class="no">GL30</span><span class="o">.</span><span class="na">GL_TRIANGLES</span><span class="o">,</span> <span class="n">indices</span><span class="o">.</span><span class="na">length</span><span class="o">,</span> <span class="no">GL_UNSIGNED_INT</span><span class="o">,</span> <span class="mi">0</span><span class="o">);</span> <span class="c1">//Draw our squares</span>

      <span class="n">glfwSwapBuffers</span><span class="o">(</span><span class="n">window</span><span class="o">);</span> <span class="c1">// swap the color buffers</span>
      <span class="c1">// Poll for window events. The key callback above will only be</span>
      <span class="c1">// invoked during this call.</span>
      <span class="n">glfwPollEvents</span><span class="o">();</span>
    <span class="o">}</span>
  <span class="o">}</span>

  <span class="kd">private</span> <span class="kd">static</span> <span class="nc">String</span> <span class="nf">parseShaderFromFile</span><span class="o">(</span><span class="nc">String</span> <span class="n">filePath</span><span class="o">)</span> <span class="o">{</span>
    <span class="nc">StringBuilder</span> <span class="n">data</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">StringBuilder</span><span class="o">();</span>
    <span class="nc">String</span> <span class="n">line</span> <span class="o">=</span> <span class="s">""</span><span class="o">;</span>
    <span class="k">try</span> <span class="o">{</span>
      <span class="nc">BufferedReader</span> <span class="n">reader</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">BufferedReader</span><span class="o">(</span><span class="k">new</span> <span class="nc">InputStreamReader</span><span class="o">(</span><span class="nc">Application</span><span class="o">.</span><span class="na">class</span><span class="o">.</span><span class="na">getResourceAsStream</span><span class="o">(</span><span class="n">filePath</span><span class="o">)));</span>
      <span class="n">line</span> <span class="o">=</span> <span class="n">reader</span><span class="o">.</span><span class="na">readLine</span><span class="o">();</span>
      <span class="k">while</span><span class="o">(</span> <span class="n">line</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">)</span>
      <span class="o">{</span>
        <span class="n">data</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="n">line</span><span class="o">);</span>
        <span class="n">data</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="sc">'\n'</span><span class="o">);</span>
        <span class="n">line</span> <span class="o">=</span> <span class="n">reader</span><span class="o">.</span><span class="na">readLine</span><span class="o">();</span>
      <span class="o">}</span>
    <span class="o">}</span>
    <span class="k">catch</span><span class="o">(</span><span class="nc">Exception</span> <span class="n">e</span><span class="o">)</span>
    <span class="o">{</span>
      <span class="k">throw</span> <span class="k">new</span> <span class="nf">IllegalArgumentException</span><span class="o">(</span><span class="s">"Unable to load shader from: "</span> <span class="o">+</span> <span class="n">filePath</span><span class="o">,</span> <span class="n">e</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="k">return</span> <span class="n">data</span><span class="o">.</span><span class="na">toString</span><span class="o">();</span>
  <span class="o">}</span>

  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">new</span> <span class="nf">Application</span><span class="o">().</span><span class="na">run</span><span class="o">();</span>
  <span class="o">}</span>

<span class="o">}</span>
</pre></table></code></div></div><p><strong>/shaders/vert.shader</strong></p><div class="language-glsl highlighter-rouge"><div class="code-header"> <span data-label-text="Glsl"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre><td class="rouge-code"><pre><span class="cp">#version 410 core
</span>
<span class="k">layout</span><span class="p">(</span><span class="n">location</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span> <span class="k">in</span> <span class="kt">vec2</span> <span class="n">position</span><span class="p">;</span>
<span class="k">layout</span><span class="p">(</span><span class="n">location</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span> <span class="k">in</span> <span class="kt">vec3</span> <span class="n">color</span><span class="p">;</span>

<span class="k">out</span> <span class="kt">vec3</span> <span class="n">v_Color</span><span class="p">;</span>

<span class="kt">void</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="nb">gl_Position</span> <span class="o">=</span> <span class="kt">vec4</span><span class="p">(</span><span class="n">position</span><span class="p">,</span> <span class="mi">0</span><span class="p">.</span><span class="mi">0</span><span class="n">f</span><span class="p">,</span> <span class="mi">1</span><span class="p">.</span><span class="mi">0</span><span class="n">f</span><span class="p">);</span>
    <span class="n">v_Color</span> <span class="o">=</span> <span class="n">color</span><span class="p">;</span>
<span class="p">}</span>
</pre></table></code></div></div><p><strong>/shaders/frag.shader</strong></p><div class="language-glsl highlighter-rouge"><div class="code-header"> <span data-label-text="Glsl"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre><span class="cp">#version 410 core
</span>
<span class="k">in</span> <span class="kt">vec3</span> <span class="n">v_Color</span><span class="p">;</span>

<span class="kt">void</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="nb">gl_FragColor</span> <span class="o">=</span> <span class="kt">vec4</span><span class="p">(</span><span class="n">v_Color</span><span class="p">,</span> <span class="mi">1</span><span class="p">.</span><span class="mi">0</span><span class="n">f</span><span class="p">);</span>
<span class="p">}</span>
</pre></table></code></div></div><h2 id="dynamic-ibos"><span class="mr-2">Dynamic IBOs</span><a href="#dynamic-ibos" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><p>When we added the fifth quad you might have wondered how we could make our IBO dynamic as we simply hardcoded it up above. Doing so is the exact same as for the VBO, maybe even slighter simpler. Firstly we will make a loop using some simple maths to generate our indices for us:</p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
</pre><td class="rouge-code"><pre><span class="c1">// Indices</span>
<span class="kt">int</span> <span class="n">indicesPerQuad</span> <span class="o">=</span> <span class="mi">6</span><span class="o">;</span>
<span class="kt">int</span> <span class="n">quads</span> <span class="o">=</span> <span class="mi">5</span><span class="o">;</span>
<span class="kt">int</span><span class="o">[]</span> <span class="n">indices</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">int</span><span class="o">[</span><span class="n">indicesPerQuad</span> <span class="o">*</span> <span class="n">quads</span><span class="o">];</span>
<span class="kt">int</span> <span class="n">offset</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
<span class="k">for</span><span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">indices</span><span class="o">.</span><span class="na">length</span><span class="o">;</span> <span class="n">i</span> <span class="o">+=</span> <span class="mi">6</span><span class="o">)</span> <span class="o">{</span>
  <span class="n">indices</span><span class="o">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">0</span><span class="o">]</span> <span class="o">=</span> <span class="mi">0</span> <span class="o">+</span> <span class="n">offset</span><span class="o">;</span>
  <span class="n">indices</span><span class="o">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="o">]</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">+</span> <span class="n">offset</span><span class="o">;</span>
  <span class="n">indices</span><span class="o">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">2</span><span class="o">]</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">+</span> <span class="n">offset</span><span class="o">;</span>

  <span class="n">indices</span><span class="o">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">3</span><span class="o">]</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">+</span> <span class="n">offset</span><span class="o">;</span>
  <span class="n">indices</span><span class="o">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">4</span><span class="o">]</span> <span class="o">=</span> <span class="mi">3</span> <span class="o">+</span> <span class="n">offset</span><span class="o">;</span>
  <span class="n">indices</span><span class="o">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">5</span><span class="o">]</span> <span class="o">=</span> <span class="mi">0</span> <span class="o">+</span> <span class="n">offset</span><span class="o">;</span>

  <span class="n">offset</span> <span class="o">+=</span> <span class="mi">4</span><span class="o">;</span>
<span class="o">}</span>

<span class="c1">// IBO (Index Buffer Object)</span>
<span class="nc">IntBuffer</span> <span class="n">iboBuffer</span> <span class="o">=</span> <span class="nc">BufferUtils</span><span class="o">.</span><span class="na">createIntBuffer</span><span class="o">(</span><span class="n">indicesPerQuad</span> <span class="o">*</span> <span class="n">quads</span><span class="o">);</span>
<span class="k">for</span><span class="o">(</span><span class="kt">int</span> <span class="n">index</span> <span class="o">:</span> <span class="n">indices</span><span class="o">)</span> <span class="o">{</span>
  <span class="n">iboBuffer</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">index</span><span class="o">);</span>
<span class="o">}</span>
<span class="n">iboBuffer</span><span class="o">.</span><span class="na">flip</span><span class="o">();</span>
</pre></table></code></div></div><p>Then we make our IBO dynamic using <code class="language-plaintext highlighter-rouge">GL_DYNAMIC_DRAW</code> and allocate memory for our indices:</p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre><span class="c1">// Pass data to GPU</span>
<span class="kt">int</span> <span class="n">iboID</span> <span class="o">=</span> <span class="no">GL30</span><span class="o">.</span><span class="na">glGenBuffers</span><span class="o">();</span>
<span class="no">GL30</span><span class="o">.</span><span class="na">glBindBuffer</span><span class="o">(</span><span class="no">GL30</span><span class="o">.</span><span class="na">GL_ELEMENT_ARRAY_BUFFER</span><span class="o">,</span> <span class="n">iboID</span><span class="o">);</span>
<span class="no">GL30</span><span class="o">.</span><span class="na">glBufferData</span><span class="o">(</span><span class="no">GL30</span><span class="o">.</span><span class="na">GL_ELEMENT_ARRAY_BUFFER</span><span class="o">,</span> <span class="n">iboBuffer</span><span class="o">.</span><span class="na">capacity</span><span class="o">()</span> <span class="o">*</span> <span class="nc">Float</span><span class="o">.</span><span class="na">BYTES</span><span class="o">,</span> <span class="no">GL30</span><span class="o">.</span><span class="na">GL_DYNAMIC_DRAW</span><span class="o">);</span>
</pre></table></code></div></div><p>Now in our main render loop, just like before we pass in our indices using <code class="language-plaintext highlighter-rouge">glBufferSubData</code>:</p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
</pre><td class="rouge-code"><pre><span class="kt">int</span> <span class="n">timer</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
<span class="c1">// Run the rendering loop until the user has attempted to close</span>
<span class="c1">// the window or has pressed the ESCAPE key.</span>
<span class="k">while</span> <span class="o">(</span> <span class="o">!</span><span class="n">glfwWindowShouldClose</span><span class="o">(</span><span class="n">window</span><span class="o">)</span> <span class="o">)</span> <span class="o">{</span>
  <span class="n">glClear</span><span class="o">(</span><span class="no">GL_COLOR_BUFFER_BIT</span> <span class="o">|</span> <span class="no">GL_DEPTH_BUFFER_BIT</span><span class="o">);</span> <span class="c1">// clear the framebuffer</span>

  <span class="c1">// If A Key is held down</span>
  <span class="k">if</span><span class="o">(</span><span class="n">aKey</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">vboBuffer</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="n">vboBuffer</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="mi">1</span><span class="o">)</span> <span class="o">+</span> <span class="mf">0.02f</span><span class="o">);</span>
    <span class="n">vboBuffer</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="mi">6</span><span class="o">,</span> <span class="n">vboBuffer</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="mi">6</span><span class="o">)</span> <span class="o">+</span> <span class="mf">0.02f</span><span class="o">);</span>
    <span class="n">vboBuffer</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="mi">11</span><span class="o">,</span> <span class="n">vboBuffer</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="mi">11</span><span class="o">)</span> <span class="o">+</span> <span class="mf">0.02f</span><span class="o">);</span>
    <span class="n">vboBuffer</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="mi">16</span><span class="o">,</span> <span class="n">vboBuffer</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="mi">16</span><span class="o">)</span> <span class="o">+</span> <span class="mf">0.02f</span><span class="o">);</span>
  <span class="o">}</span>

  <span class="n">timer</span><span class="o">++;</span>
  <span class="c1">// After 200 frames</span>
  <span class="k">if</span><span class="o">(</span><span class="n">timer</span> <span class="o">==</span> <span class="mi">200</span><span class="o">)</span> <span class="o">{</span>
    <span class="c1">// Regenerate our vboBuffer with the new quad</span>
    <span class="n">vboBuffer</span><span class="o">.</span><span class="na">clear</span><span class="o">();</span>
    <span class="k">for</span><span class="o">(</span><span class="kt">float</span> <span class="n">vertex</span> <span class="o">:</span> <span class="n">vertices</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">vboBuffer</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">vertex</span><span class="o">);</span>
    <span class="o">}</span>
    <span class="k">for</span><span class="o">(</span><span class="kt">float</span> <span class="n">vertex</span> <span class="o">:</span> <span class="n">quad5</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">vboBuffer</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">vertex</span><span class="o">);</span>
    <span class="o">}</span>
    <span class="n">vboBuffer</span><span class="o">.</span><span class="na">flip</span><span class="o">();</span>
  <span class="o">}</span>

  <span class="no">GL30</span><span class="o">.</span><span class="na">glBufferSubData</span><span class="o">(</span><span class="no">GL30</span><span class="o">.</span><span class="na">GL_ARRAY_BUFFER</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="n">vboBuffer</span><span class="o">);</span>
  <span class="no">GL30</span><span class="o">.</span><span class="na">glBufferSubData</span><span class="o">(</span><span class="no">GL30</span><span class="o">.</span><span class="na">GL_ELEMENT_ARRAY_BUFFER</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="n">iboBuffer</span><span class="o">);</span>

  <span class="no">GL30</span><span class="o">.</span><span class="na">glDrawElements</span><span class="o">(</span><span class="no">GL30</span><span class="o">.</span><span class="na">GL_TRIANGLES</span><span class="o">,</span> <span class="n">indices</span><span class="o">.</span><span class="na">length</span><span class="o">,</span> <span class="no">GL_UNSIGNED_INT</span><span class="o">,</span> <span class="mi">0</span><span class="o">);</span> <span class="c1">//Draw our squares</span>

  <span class="n">glfwSwapBuffers</span><span class="o">(</span><span class="n">window</span><span class="o">);</span> <span class="c1">// swap the color buffers</span>
  <span class="c1">// Poll for window events. The key callback above will only be</span>
  <span class="c1">// invoked during this call.</span>
  <span class="n">glfwPollEvents</span><span class="o">();</span>
<span class="o">}</span>
</pre></table></code></div></div><p>With that our program is complete! It will work the exact same as before except this time we could add more indices on the fly if necessary too, just like for our vertices.</p><h2 id="conclusion"><span class="mr-2">Conclusion</span><a href="#conclusion" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><p>Thanks so much for reading this tutorial, I hoped it helped you out somewhat and if you could please leave some feedback in the comments I’d really appreciate it :D I recently completed a project using in which I used Batch Rendering and Dynamic VBOs and IBOs to visualize sorting algorithms. If you want to check that out to see how these techniques can be applied, and also abstracted, it can be found on my github <a href="https://github.com/cianjinks/Sorting-Visualizer">here</a>.</p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/old/'>Old</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/opengl/" class="post-tag no-text-decoration" >opengl</a> <a href="/tags/lwjgl/" class="post-tag no-text-decoration" >lwjgl</a> <a href="/tags/tutorial/" class="post-tag no-text-decoration" >tutorial</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=OpenGL Tutorial - Batch Rendering and Dynamic VBOs - Cian Jinks&amp;url=https://cianjinks.github.io//posts/opengl-tutorial-batch-rendering-and-dynamic-vbos/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=OpenGL Tutorial - Batch Rendering and Dynamic VBOs - Cian Jinks&amp;u=https://cianjinks.github.io//posts/opengl-tutorial-batch-rendering-and-dynamic-vbos/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=https://cianjinks.github.io//posts/opengl-tutorial-batch-rendering-and-dynamic-vbos/&amp;text=OpenGL Tutorial - Batch Rendering and Dynamic VBOs - Cian Jinks" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" data-title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Recently Updated</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/cmake-project-graphics-programming/">Creating a CMake Project for cross platform graphics programming with OpenGL</a><li><a href="/posts/opengl-tutorial-batch-rendering-and-dynamic-vbos/">OpenGL Tutorial - Batch Rendering and Dynamic VBOs</a><li><a href="/posts/opengl-tutorial-visualizing-the-mandelbrot-set-fractal-part-1-of-2/">OpenGL Tutorial - Visualizing the Mandelbrot Set Fractal - Part 1 of 2</a><li><a href="/posts/tutorial-using-maven-and-intellij-for-opengl-projects/">Tutorial - Using Maven and IntelliJ for OpenGL Projects</a><li><a href="/posts/opengl-tutorial-visualizing-the-mandelbrot-set-part-2-of-2/">OpenGL Tutorial - Visualizing the Mandelbrot Set Fractal - Part 2 of 2</a></ul></div><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/opengl/">opengl</a> <a class="post-tag" href="/tags/tutorial/">tutorial</a> <a class="post-tag" href="/tags/lwjgl/">lwjgl</a> <a class="post-tag" href="/tags/fractal/">fractal</a> <a class="post-tag" href="/tags/cmake/">cmake</a> <a class="post-tag" href="/tags/ctf/">ctf</a> <a class="post-tag" href="/tags/imgui/">imgui</a> <a class="post-tag" href="/tags/maven/">maven</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">Contents</div><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="tail-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/opengl-tutorial-visualizing-the-mandelbrot-set-fractal-part-1-of-2/"><div class="card-body"> <em class="timeago small" data-ts="1589630400" > 2020-05-16 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>OpenGL Tutorial - Visualizing the Mandelbrot Set Fractal - Part 1 of 2</h3><div class="text-muted small"><p> Welcome to my first blog post/tutorial of many I hope to create on the topic of computer graphics programming using OpenGL. Over the past half a year or so I have been spending a large portion of m...</p></div></div></a></div><div class="card"> <a href="/posts/tutorial-using-maven-and-intellij-for-opengl-projects/"><div class="card-body"> <em class="timeago small" data-ts="1590667200" > 2020-05-28 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Tutorial - Using Maven and IntelliJ for OpenGL Projects</h3><div class="text-muted small"><p> This tutorial will quickly cover how one can use Maven along with IntelliJ to get started with graphics programming using OpenGL. I originally wrote this so people could use it to directly follow a...</p></div></div></a></div><div class="card"> <a href="/posts/opengl-tutorial-visualizing-the-mandelbrot-set-part-2-of-2/"><div class="card-body"> <em class="timeago small" data-ts="1590926400" > 2020-05-31 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>OpenGL Tutorial - Visualizing the Mandelbrot Set Fractal - Part 2 of 2</h3><div class="text-muted small"><p> This is part 2 of my tutorial series on Visualizing the Mandelbrot Set Fractal using OpenGL. This part will cover the creation of a camera for zooming in and out and moving around as well as the fr...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/opengl-tutorial-visualizing-the-mandelbrot-set-part-2-of-2/" class="btn btn-outline-primary" prompt="Older"><p>OpenGL Tutorial - Visualizing the Mandelbrot Set Fractal - Part 2 of 2</p></a> <a href="/posts/cmake-project-graphics-programming/" class="btn btn-outline-primary" prompt="Newer"><p>Creating a CMake Project for cross platform graphics programming with OpenGL</p></a></div></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center text-muted"><div class="footer-left"><p class="mb-0"> © 2022 <a href="https://twitter.com/cianjinks">Cian Jinks</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/opengl/">opengl</a> <a class="post-tag" href="/tags/tutorial/">tutorial</a> <a class="post-tag" href="/tags/lwjgl/">lwjgl</a> <a class="post-tag" href="/tags/fractal/">fractal</a> <a class="post-tag" href="/tags/cmake/">cmake</a> <a class="post-tag" href="/tags/ctf/">ctf</a> <a class="post-tag" href="/tags/imgui/">imgui</a> <a class="post-tag" href="/tags/maven/">maven</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/lozad/dist/lozad.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1/dayjs.min.js,npm/dayjs@1/locale/en.min.js,npm/dayjs@1/plugin/relativeTime.min.js,npm/dayjs@1/plugin/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.bundle.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=G-BJS97N23FL"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-BJS97N23FL'); }); </script>
